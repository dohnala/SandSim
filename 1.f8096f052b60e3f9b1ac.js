(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{10:function(t,n,e){"use strict";var r=e.w[t.i];t.exports=r;e(9);r.u()},15:function(t,n,e){"use strict";e.r(n),e.d(n,"canvas",(function(){return R})),e.d(n,"width",(function(){return A})),e.d(n,"height",(function(){return D})),e.d(n,"map",(function(){return O})),e.d(n,"nextTick",(function(){return Z}));var r=e(9),i=e(10),a=e(12);function o(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function u(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,n,e){return n&&u(t.prototype,n),e&&u(t,e),t}var s=document.getElementById("fps"),l=document.getElementById("meanFrameTime"),f=document.getElementById("meanRenderTime"),h=document.getElementById("meanTickTime"),d=document.getElementById("lastTickTime"),m=new(function(){function t(){o(this,t),this.mean=0,this.frames=[],this.lastFrameTimeStamp=performance.now()}return c(t,[{key:"measure",value:function(){var t=performance.now(),n=t-this.lastFrameTimeStamp;this.lastFrameTimeStamp=t;var e=1/n*1e3;this.frames.push(e),this.frames.length>100&&this.frames.shift(),this.mean=y(this.frames)}}]),t}()),v=new(function(){function t(){o(this,t),this.mean=0,this.last=0,this.frames=[],this.startTime=performance.now()}return c(t,[{key:"start",value:function(){this.startTime=performance.now()}},{key:"stop",value:function(){if(!window.paused){var t=performance.now()-this.startTime;this.last=t,this.frames.push(t),this.frames.length>100&&this.frames.shift(),this.mean=y(this.frames)}}}]),t}()),p=new(function(){function t(){o(this,t),this.mean=0,this.last=0,this.frames=[],this.startTime=performance.now()}return c(t,[{key:"start",value:function(){this.startTime=performance.now()}},{key:"stop",value:function(){if(!window.paused){var t=performance.now()-this.startTime;this.last=t,this.frames.push(t),this.frames.length>100&&this.frames.shift(),this.mean=y(this.frames)}}}]),t}()),w=new(function(){function t(){o(this,t),this.mean=0,this.last=0,this.frames=[],this.startTime=performance.now()}return c(t,[{key:"start",value:function(){this.startTime=performance.now()}},{key:"stop",value:function(){var t=performance.now()-this.startTime;this.last=t,d.textContent=window.paused?"".concat(Math.round(this.last),"ms"):"",this.frames.push(t),this.frames.length>100&&this.frames.shift(),this.mean=y(this.frames)}}]),t}()),y=function(t){for(var n=0,e=0;e<t.length;e++)n+=t[e];return n/t.length};setInterval((function(){s.textContent="FPS: ".concat(Math.round(m.mean)),l.textContent="".concat(Math.round(v.mean),"ms"),f.textContent="".concat(Math.round(p.mean),"ms"),h.textContent="".concat(Math.round(w.mean),"ms")}),500);var g=e(14),k=document.getElementById("canvas"),b=r.a.Sand,x=!1,T=g("#play"),E=g("#pause"),M=g("#nextFrame");T.hide(),M.addClass("disabled"),T.click((function(){return _()})),E.click((function(){return _()})),M.click((function(){x&&(w.start(),Z(),w.stop())})),g("#reset").click((function(){return O.clear()}));var _=function(){x=!x,window.paused=x,x?(T.show(),E.hide(),M.removeClass("disabled")):(T.hide(),E.show(),M.addClass("disabled"))};g("#emptyElement").change((function(){return b=r.a.Empty})),g("#wallElement").change((function(){return b=r.a.Wall})),g("#sandElement").change((function(){return b=r.a.Sand}));var I=!1,X=null,Y=null;k.addEventListener("mousedown",(function(t){t.preventDefault(),I=!0,clearInterval(Y),Y=window.setInterval((function(){return C(t)}),100),C(t),X=t})),document.body.addEventListener("mouseup",(function(t){clearInterval(Y),I&&(t.preventDefault(),X=null,I=!1)})),k.addEventListener("mousemove",(function(t){clearInterval(Y),function(t){clearInterval(Y),Y=window.setInterval((function(){return C(t)}),100);var n={clientX:t.clientX,clientY:t.clientY};if(!I)return;var e=0;if(C(n),X)for(;q(n,X)>1/3;){var r=q(n,X);if(n=B(n,S(P(F(X,t)),Math.min(1/3,r))),++e>1e3)break;C(n)}X=t}(t)})),k.addEventListener("mouseleave",(function(t){clearInterval(Y),X=null}));var C=function(t){if(I){var n=k.getBoundingClientRect(),e=k.width/Math.ceil(window.devicePixelRatio)/n.width,r=k.height/Math.ceil(window.devicePixelRatio)/n.height,i=(t.clientX-n.left)*e,a=(t.clientY-n.top)*r,o=Math.min(Math.floor(i),A-1),u=Math.min(Math.floor(a),D-1);O.insert(o,u,b)}};var q=function(t,n){return Math.sqrt(Math.pow(t.clientX-n.clientX,2)+Math.pow(t.clientY-n.clientY,2),2)},B=function(t,n){return{clientX:t.clientX+n.clientX,clientY:t.clientY+n.clientY}},F=function(t,n){return{clientX:t.clientX-n.clientX,clientY:t.clientY-n.clientY}},P=function(t){var n=j(t);return{clientX:t.clientX/n,clientY:t.clientY/n}},S=function(t,n){return{clientX:t.clientX*n,clientY:t.clientY*n}},j=function(t){return Math.sqrt(Math.pow(t.clientX,2)+Math.pow(t.clientY,2),2)},A=100,D=100,O=r.b.new(A,D),R=document.getElementById("canvas");R.width=A*Math.ceil(window.devicePixelRatio),R.height=D*Math.ceil(window.devicePixelRatio);var L,U,W,J,z,G,H,K,N,Q,V=(U=(L={canvas:R,map:O}).canvas,W=L.map,J=a({canvas:U}),z=W.width(),G=W.height(),H=W.pixels(),K=new Uint8Array(i.q.buffer,H,z*G*4),N=J.texture({width:z,height:G,data:K}),Q=J({frag:"\n        precision highp float;\n        uniform sampler2D data;\n        varying vec2 uv;\n        void main() {\n            vec2 textCoord = (uv * vec2(0.5, -0.5)) + vec2(0.5);\n            vec4 data = texture2D(data, textCoord);\n            int element = int((data.r * 255.) + 0.1);\n            vec4 color;\n            \n            // empty\n            if (element == 0) {\n                color = vec4(255, 255, 255, 1);\n            }\n            \n            if (element == 1) {\n                color = vec4(0, 0, 0, 1);\n            }\n            \n            // sand\n            if (element == 2) {\n                color = vec4(0.76, 0.7, 0.5, 1);\n            }\n            \n            gl_FragColor = color;\n        }",vert:"\n        precision mediump float;\n        attribute vec2 position;\n        varying vec2 uv;\n        void main() {\n            uv = position;\n            gl_Position = vec4(position, 0, 1);\n        }",uniforms:{data:function(){return H=W.pixels(),K=new Uint8Array(i.q.buffer,H,z*G*4),N({width:z,height:G,data:K})}},attributes:{position:[[-1,4],[-1,-1],[4,-1]]},count:3}),function(){J.poll(),Q()}),Z=function(){O.tick()};!function t(){m.measure(),v.start(),window.paused||(w.start(),Z(),w.stop()),p.start(),V(),p.stop(),v.stop(),window.animationId=requestAnimationFrame(t)}()},9:function(t,n,e){"use strict";(function(t){e.d(n,"a",(function(){return k})),e.d(n,"b",(function(){return b})),e.d(n,"d",(function(){return E})),e.d(n,"e",(function(){return M})),e.d(n,"c",(function(){return _})),e.d(n,"f",(function(){return I})),e.d(n,"g",(function(){return X}));var r=e(10);function i(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function a(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,n,e){return n&&a(t.prototype,n),e&&a(t,e),t}var u=new Array(32).fill(void 0);function c(t){return u[t]}u.push(void 0,null,!0,!1);var s=u.length;function l(t){var n=c(t);return function(t){t<36||(u[t]=s,s=t)}(t),n}var f=new("undefined"==typeof TextDecoder?(0,t.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});f.decode();var h=null;function d(){return null!==h&&h.buffer===r.q.buffer||(h=new Uint8Array(r.q.buffer)),h}function m(t,n){return f.decode(d().subarray(t,t+n))}var v=0,p=new("undefined"==typeof TextEncoder?(0,t.require)("util").TextEncoder:TextEncoder)("utf-8"),w="function"==typeof p.encodeInto?function(t,n){return p.encodeInto(t,n)}:function(t,n){var e=p.encode(t);return n.set(e),{read:t.length,written:e.length}};var y=null;function g(){return null!==y&&y.buffer===r.q.buffer||(y=new Int32Array(r.q.buffer)),y}var k=Object.freeze({Empty:0,0:"Empty",Wall:1,1:"Wall",Sand:2,2:"Sand"}),b=function(){function t(){i(this,t)}return o(t,[{key:"free",value:function(){var t=this.ptr;this.ptr=0,r.a(t)}},{key:"insert",value:function(t,n,e){r.l(this.ptr,t,n,e)}},{key:"clear",value:function(){r.g(this.ptr)}},{key:"tick",value:function(){r.o(this.ptr)}},{key:"width",value:function(){return r.p(this.ptr)}},{key:"height",value:function(){return r.k(this.ptr)}},{key:"generation",value:function(){return r.h(this.ptr)}},{key:"pixels",value:function(){return r.n(this.ptr)}},{key:"get_pixel",value:function(t,n){var e=r.i(this.ptr,t,n);return x.__wrap(e)}},{key:"get_pixel_state",value:function(t,n){var e=r.j(this.ptr,t,n);return T.__wrap(e)}}],[{key:"__wrap",value:function(n){var e=Object.create(t.prototype);return e.ptr=n,e}},{key:"new",value:function(n,e){var i=r.m(n,e);return t.__wrap(i)}}]),t}(),x=function(){function t(){i(this,t)}return o(t,[{key:"free",value:function(){var t=this.ptr;this.ptr=0,r.b(t)}},{key:"element",value:function(){return r.r(this.ptr)>>>0}}],[{key:"__wrap",value:function(n){var e=Object.create(t.prototype);return e.ptr=n,e}},{key:"new",value:function(n){var e=r.s(n);return t.__wrap(e)}}]),t}(),T=function(){function t(){i(this,t)}return o(t,[{key:"free",value:function(){var t=this.ptr;this.ptr=0,r.c(t)}},{key:"element",value:function(){return r.r(this.ptr)>>>0}},{key:"clock",value:function(){return r.t(this.ptr)}}],[{key:"__wrap",value:function(n){var e=Object.create(t.prototype);return e.ptr=n,e}},{key:"new",value:function(n){var e=r.s(n);return t.__wrap(e)}}]),t}(),E=function(){return function(t){s===u.length&&u.push(u.length+1);var n=s;return s=u[n],u[n]=t,n}(new Error)},M=function(t,n){var e=function(t,n,e){if(void 0===e){var r=p.encode(t),i=n(r.length);return d().subarray(i,i+r.length).set(r),v=r.length,i}for(var a=t.length,o=n(a),u=d(),c=0;c<a;c++){var s=t.charCodeAt(c);if(s>127)break;u[o+c]=s}if(c!==a){0!==c&&(t=t.slice(c)),o=e(o,a,a=c+3*t.length);var l=d().subarray(o+c,o+a);c+=w(t,l).written}return v=c,o}(c(n).stack,r.e,r.f),i=v;g()[t/4+1]=i,g()[t/4+0]=e},_=function(t,n){try{console.error(m(t,n))}finally{r.d(t,n)}},I=function(t){l(t)},X=function(t,n){throw new Error(m(t,n))}}).call(this,e(13)(t))}}]);
//# sourceMappingURL=1.f8096f052b60e3f9b1ac.js.map