(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{10:function(t,e,n){"use strict";var r=n.w[t.i];t.exports=r;n(9);r.z()},15:function(t,e,n){"use strict";n.r(e),n.d(e,"canvas",(function(){return nt})),n.d(e,"config",(function(){return et})),n.d(e,"map",(function(){return z})),n.d(e,"createMap",(function(){return rt})),n.d(e,"nextTick",(function(){return it}));var r=n(9),i=n(10),a=n(11),o=[{key:0,value:{name:"Empty",color:"rgba(255,255,255,1)"}},{key:1,value:{name:"Wall",color:"rgba(0,0,0,1)"}},{key:2,value:{name:"Sand",color:"rgba(194, 178, 127, 1)"}}],c=document.getElementById("fps"),u=document.getElementById("meanRenderTime"),l=document.getElementById("meanTickTime"),s=document.getElementById("lastTickTime"),f=document.getElementById("meanPixelsProcessed"),h=document.getElementById("lastPixelsProcessed"),v={mean:0,delta:0,frames:[],lastFrameTimeStamp:performance.now(),measure:function(){var t=performance.now(),e=t-this.lastFrameTimeStamp;this.lastFrameTimeStamp=t;var n=1/e*1e3;this.delta=e/1e3,this.frames.push(n),this.frames.length>100&&this.frames.shift(),this.mean=w(this.frames)}},d={mean:0,last:0,frames:[],startTime:performance.now(),start:function(){this.startTime=performance.now()},stop:function(){if(!window.paused){var t=performance.now()-this.startTime;this.last=t,this.frames.push(t),this.frames.length>100&&this.frames.shift(),this.mean=w(this.frames)}}},m={mean:0,last:0,frames:[],startTime:performance.now(),start:function(){this.startTime=performance.now()},stop:function(){var t=performance.now()-this.startTime;this.last=t,s.textContent=window.paused?"".concat(Math.round(this.last),"ms"):"",this.frames.push(t),this.frames.length>100&&this.frames.shift(),this.mean=w(this.frames)}},p={mean:0,last:0,frames:[],measure:function(t){this.last=t,h.textContent=window.paused?"".concat(Math.round(this.last)," \n        (").concat(y(this.last,et.width*et.height),"%)"):"",this.frames.push(t),this.frames.length>100&&this.frames.shift(),this.mean=w(this.frames)}},w=function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e/t.length},y=function(t,e){return Math.round(100*t/e)};setInterval((function(){c.textContent="FPS: ".concat(Math.round(v.mean)),u.textContent="".concat(Math.round(d.mean),"ms"),l.textContent="".concat(Math.round(m.mean),"ms"),f.textContent="".concat(Math.round(p.mean)," \n    (").concat(y(Math.round(p.mean),et.width*et.height),"%)")}),100);var g=n(13),_=document.getElementById("canvas");g("document").ready((function(){k(),P()})),g("#create").click((function(){et.width=tt(g("#configWidth").val(),64,512),et.height=tt(g("#configHeight").val(),64,512),et.gravity=tt(g("#configGravity").val(),-1,1),et.max_velocity=tt(g("#configMaxVelocity").val(),0,100),rt(),k()}));var k=function(){g("#configWidth").val(et.width),g("#configHeight").val(et.height),g("#configGravity").val(et.gravity),g("#configMaxVelocity").val(et.max_velocity)},x=!1,b=g("#play"),M=g("#pause"),E=g("#nextFrame"),I=g("#reset");b.hide(),E.addClass("disabled"),b.click((function(){return T()})),M.click((function(){return T()})),E.click((function(){return C()})),I.click((function(){return X()})),g("body").keypress((function(t){112===t.keyCode?T():102===t.keyCode?C():114===t.keyCode&&X()}));var T=function(){x=!x,window.paused=x,x?(b.show(),M.hide(),E.removeClass("disabled")):(b.hide(),M.show(),E.addClass("disabled"))},C=function(){x&&(m.start(),p.measure(it()),m.stop())},X=function(){z.clear()},Y=null,P=function(){var t=function(t){if(o.hasOwnProperty(t)){var e='\n                <div class="form-check">\n                    <input class="form-check-input" type="radio" name="flexRadioDefault" id="element_'.concat(t,'">\n                    <label class="form-check-label" for="element_').concat(t,'">\n                        <i class="bi bi-square-fill" style="color: ').concat(o[t].value.color,'"></i>\n                        <label>').concat(o[t].value.name,"</label>\n                    </label>\n                </div>");g("#painting").append(e),g("#element_"+t).change((function(){return Y=Number(t)}))}};for(var e in o)t(e);Y=2,g("#element_2").attr("checked",!0)},D={value:0,step:1,min:0,max:5},B=g("#brushSize");B.on("change",(function(){D.value=tt(Number(g(this).val()),D.min,D.max)})),g(window).bind("mousewheel DOMMouseScroll",(function(t){t.originalEvent.wheelDelta>0||t.originalEvent.detail<0?(D.value=tt(D.value+D.step,D.min,D.max),B.val(D.value)):(D.value=tt(D.value-D.step,D.min,D.max),B.val(D.value))}));var O=null,S=!1,j=null,q=g("#inspectCheck"),A=g("#inspectDetails");A.hide(),q.click((function(){q.prop("checked")?(S=!0,clearInterval(j),j=window.setInterval((function(){return F()}),100)):(S=!1,clearInterval(j))}));var F=function(t){if(S&&O){var e=z.pixel_state(O[0],O[1]);e&&(A.show(),g("#inspectElement").text(o[e.element()].value.name),g("#inspectPosition").text("("+O[0]+", "+O[1]+")"),g("#inspectVelocity").text("(0, "+e.velocity_y()+")"))}else A.hide()},R=!1,W=null,L=null;_.addEventListener("mousedown",(function(t){t.preventDefault(),R=!0,clearInterval(L),L=window.setInterval((function(){return V(t)}),100),V(t),W=t})),document.body.addEventListener("mouseup",(function(t){clearInterval(L),R&&(t.preventDefault(),W=null,R=!1)})),_.addEventListener("mousemove",(function(t){clearInterval(L),G(t),function(t){O=q.prop("checked")?H(t):null}(t)})),_.addEventListener("mouseleave",(function(t){clearInterval(L),W=null,O=null}));var z,U,V=function(t){if(R){var e=H(t);z.insert(e[0],e[1],Y,D.value)}},G=function(t){clearInterval(L),L=window.setInterval((function(){return V(t)}),100);var e={clientX:t.clientX,clientY:t.clientY};if(R){var n=0;if(V(e),W)for(;J(e,W)>1/3;){var r=J(e,W);if(e=N(e,Z(Q(K(W,t)),Math.min(1/3,r))),++n>1e3)break;V(e)}W=t}},H=function(t){var e=_.getBoundingClientRect(),n=_.width/Math.ceil(window.devicePixelRatio)/e.width,r=_.height/Math.ceil(window.devicePixelRatio)/e.height,i=(t.clientX-e.left)*n,a=(t.clientY-e.top)*r;return[Math.max(Math.min(Math.floor(i),et.width-1),0),Math.max(Math.min(Math.floor(a),et.height-1),0)]},J=function(t,e){return Math.sqrt(Math.pow(t.clientX-e.clientX,2)+Math.pow(t.clientY-e.clientY,2),2)},N=function(t,e){return{clientX:t.clientX+e.clientX,clientY:t.clientY+e.clientY}},K=function(t,e){return{clientX:t.clientX-e.clientX,clientY:t.clientY-e.clientY}},Q=function(t){var e=$(t);return{clientX:t.clientX/e,clientY:t.clientY/e}},Z=function(t,e){return{clientX:t.clientX*e,clientY:t.clientY*e}},$=function(t){return Math.sqrt(Math.pow(t.clientX,2)+Math.pow(t.clientY,2),2)},tt=function(t,e,n){return Math.min(Math.max(t,e),n)},et={width:128,height:128,gravity:.2,max_velocity:5},nt=document.getElementById("canvas"),rt=function(){var t,e,n,o,c,u,l,s,f,h;z=r.a.new(r.b.new(et.width,et.height,et.gravity,et.max_velocity,Math.floor(Math.random()*Math.floor(1e4)))),nt.width=et.width*Math.ceil(window.devicePixelRatio),nt.height=et.height*Math.ceil(window.devicePixelRatio),e=(t={canvas:nt,map:z}).canvas,n=t.map,o=a({canvas:e}),c=n.width(),u=n.height(),l=n.pixels(),s=new Uint8Array(i.s.buffer,l,c*u*4),f=o.texture({width:c,height:u,data:s}),h=o({frag:"\n        precision highp float;\n        uniform sampler2D data;\n        varying vec2 uv;\n        void main() {\n            vec2 textCoord = (uv * vec2(0.5, -0.5)) + vec2(0.5);\n            vec4 data = texture2D(data, textCoord);\n            int element = int((data.r * 255.) + 0.1);\n            vec4 color;\n            \n            // empty\n            if (element == 0) {\n                color = vec4(255, 255, 255, 1);\n            }\n            \n            if (element == 1) {\n                color = vec4(0, 0, 0, 1);\n            }\n            \n            // sand\n            if (element == 2) {\n                color = vec4(0.76, 0.7, 0.5, 1);\n            }\n            \n            gl_FragColor = color;\n        }",vert:"\n        precision mediump float;\n        attribute vec2 position;\n        varying vec2 uv;\n        void main() {\n            uv = position;\n            gl_Position = vec4(position, 0, 1);\n        }",uniforms:{data:function(){return l=n.pixels(),s=new Uint8Array(i.s.buffer,l,c*u*4),f({width:c,height:u,data:s})}},attributes:{position:[[-1,4],[-1,-1],[4,-1]]},count:3}),U=function(){o.poll(),h()}};rt();var it=function(){return z.tick(v.delta)};!function t(){v.measure(),window.paused||(m.start(),p.measure(it()),m.stop()),d.start(),U(),d.stop(),window.animationId=requestAnimationFrame(t)}()},9:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return _})),n.d(e,"b",(function(){return k})),n.d(e,"d",(function(){return M})),n.d(e,"e",(function(){return E})),n.d(e,"c",(function(){return I})),n.d(e,"f",(function(){return T})),n.d(e,"g",(function(){return C}));var r=n(10);function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}var c=new Array(32).fill(void 0);function u(t){return c[t]}c.push(void 0,null,!0,!1);var l=c.length;function s(t){var e=u(t);return function(t){t<36||(c[t]=l,l=t)}(t),e}var f=new("undefined"==typeof TextDecoder?(0,t.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});f.decode();var h=null;function v(){return null!==h&&h.buffer===r.s.buffer||(h=new Uint8Array(r.s.buffer)),h}function d(t,e){return f.decode(v().subarray(t,t+e))}var m=0,p=new("undefined"==typeof TextEncoder?(0,t.require)("util").TextEncoder:TextEncoder)("utf-8"),w="function"==typeof p.encodeInto?function(t,e){return p.encodeInto(t,e)}:function(t,e){var n=p.encode(t);return e.set(n),{read:t.length,written:n.length}};var y=null;function g(){return null!==y&&y.buffer===r.s.buffer||(y=new Int32Array(r.s.buffer)),y}Object.freeze({Empty:0,0:"Empty",Wall:1,1:"Wall",Sand:2,2:"Sand"});var _=function(){function t(){i(this,t)}return o(t,[{key:"__destroy_into_raw",value:function(){var t=this.ptr;return this.ptr=0,t}},{key:"free",value:function(){var t=this.__destroy_into_raw();r.a(t)}},{key:"insert",value:function(t,e,n,i){r.k(this.ptr,t,e,n,i)}},{key:"clear",value:function(){r.h(this.ptr)}},{key:"tick",value:function(){return r.p(this.ptr)>>>0}},{key:"width",value:function(){return r.q(this.ptr)}},{key:"height",value:function(){return r.j(this.ptr)}},{key:"generation",value:function(){return r.i(this.ptr)}},{key:"pixels",value:function(){return r.o(this.ptr)}},{key:"pixel",value:function(t,e){var n=r.m(this.ptr,t,e);return x.__wrap(n)}},{key:"pixel_state",value:function(t,e){var n=r.n(this.ptr,t,e);return b.__wrap(n)}}],[{key:"__wrap",value:function(e){var n=Object.create(t.prototype);return n.ptr=e,n}},{key:"new",value:function(e){!function(t,e){if(!(t instanceof e))throw new Error("expected instance of ".concat(e.name));t.ptr}(e,k);var n=e.ptr;e.ptr=0;var i=r.l(n);return t.__wrap(i)}}]),t}(),k=function(){function t(){i(this,t)}return o(t,[{key:"__destroy_into_raw",value:function(){var t=this.ptr;return this.ptr=0,t}},{key:"free",value:function(){var t=this.__destroy_into_raw();r.b(t)}}],[{key:"__wrap",value:function(e){var n=Object.create(t.prototype);return n.ptr=e,n}},{key:"new",value:function(e,n,i,a,o){var c=r.r(e,n,i,a,o);return t.__wrap(c)}}]),t}(),x=function(){function t(){i(this,t)}return o(t,[{key:"__destroy_into_raw",value:function(){var t=this.ptr;return this.ptr=0,t}},{key:"free",value:function(){var t=this.__destroy_into_raw();r.c(t)}},{key:"element",value:function(){return r.t(this.ptr)>>>0}}],[{key:"__wrap",value:function(e){var n=Object.create(t.prototype);return n.ptr=e,n}},{key:"new",value:function(e){var n=r.u(e);return t.__wrap(n)}}]),t}(),b=function(){function t(){i(this,t)}return o(t,[{key:"__destroy_into_raw",value:function(){var t=this.ptr;return this.ptr=0,t}},{key:"free",value:function(){var t=this.__destroy_into_raw();r.d(t)}},{key:"element",value:function(){return r.w(this.ptr)>>>0}},{key:"velocity_y",value:function(){return r.y(this.ptr)}},{key:"clock_flag",value:function(){return 0!==r.v(this.ptr)}}],[{key:"__wrap",value:function(e){var n=Object.create(t.prototype);return n.ptr=e,n}},{key:"new",value:function(e){var n=r.x(e);return t.__wrap(n)}}]),t}(),M=function(){return function(t){l===c.length&&c.push(c.length+1);var e=l;return l=c[e],c[e]=t,e}(new Error)},E=function(t,e){var n=function(t,e,n){if(void 0===n){var r=p.encode(t),i=e(r.length);return v().subarray(i,i+r.length).set(r),m=r.length,i}for(var a=t.length,o=e(a),c=v(),u=0;u<a;u++){var l=t.charCodeAt(u);if(l>127)break;c[o+u]=l}if(u!==a){0!==u&&(t=t.slice(u)),o=n(o,a,a=u+3*t.length);var s=v().subarray(o+u,o+a);u+=w(t,s).written}return m=u,o}(u(e).stack,r.f,r.g),i=m;g()[t/4+1]=i,g()[t/4+0]=n},I=function(t,e){try{console.error(d(t,e))}finally{r.e(t,e)}},T=function(t){s(t)},C=function(t,e){throw new Error(d(t,e))}}).call(this,n(12)(t))}}]);
//# sourceMappingURL=1.3906b8de598fd26b0104.js.map