(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[,function(t,e,n){"use strict";n.r(e),n.d(e,"canvas",(function(){return M})),n.d(e,"width",(function(){return m})),n.d(e,"height",(function(){return g})),n.d(e,"map",(function(){return b}));var i=n(5),r=n(2);const c=n(4);const o=document.getElementById("canvas");let a=!1,l=null,u=null;o.addEventListener("mousedown",t=>{t.preventDefault(),a=!0,clearInterval(u),u=window.setInterval(()=>d(t),100),d(t),l=t}),document.body.addEventListener("mouseup",t=>{clearInterval(u),a&&(t.preventDefault(),l=null,a=!1)}),o.addEventListener("mousemove",t=>{clearInterval(u),function(t){clearInterval(u),u=window.setInterval(()=>d(t),100);let e={clientX:t.clientX,clientY:t.clientY};if(!a)return;let n=0;if(d(e),l)for(;s(e,l)>1/3;){let i=s(e,l);if(e=h(e,p(f(v(l,t)),Math.min(1/3,i))),n++,n>1e3)break;d(e)}l=t}(t)}),o.addEventListener("mouseleave",t=>{clearInterval(u),l=null});const d=t=>{if(console.log(a),!a)return;const e=o.getBoundingClientRect(),n=o.width/Math.ceil(window.devicePixelRatio)/e.width,r=o.height/Math.ceil(window.devicePixelRatio)/e.height,c=(t.clientX-e.left)*n,l=(t.clientY-e.top)*r,u=Math.min(Math.floor(c),m-1),d=Math.min(Math.floor(l),g-1);b.paint(u,d,i.a.Sand)};const s=(t,e)=>Math.sqrt(Math.pow(t.clientX-e.clientX,2)+Math.pow(t.clientY-e.clientY,2),2),h=(t,e)=>({clientX:t.clientX+e.clientX,clientY:t.clientY+e.clientY}),v=(t,e)=>({clientX:t.clientX-e.clientX,clientY:t.clientY-e.clientY}),f=t=>{let e=w(t);return{clientX:t.clientX/e,clientY:t.clientY/e}},p=(t,e)=>({clientX:t.clientX*e,clientY:t.clientY*e}),w=t=>Math.sqrt(Math.pow(t.clientX,2)+Math.pow(t.clientY,2),2);let m=100,g=100;const b=i.b.new(m,g),M=document.getElementById("canvas");M.width=m*Math.ceil(window.devicePixelRatio),M.height=g*Math.ceil(window.devicePixelRatio);let X=(({canvas:t,map:e})=>{const n=c({canvas:t}),i=e.width(),o=e.height();let a=e.pixels(),l=new Uint8Array(r.i.buffer,a,i*o*4);const u=n.texture({width:i,height:o,data:l});let d=n({frag:"\n        precision highp float;\n        uniform sampler2D data;\n        varying vec2 uv;\n        void main() {\n            vec2 textCoord = (uv * vec2(0.5, -0.5)) + vec2(0.5);\n            vec4 data = texture2D(data, textCoord);\n            int element = int((data.r * 255.) + 0.1);\n            vec4 color;\n            \n            // empty\n            if (element == 0) {\n                color = vec4(1, 1, 1, 1);\n            }\n            \n            // sand\n            if (element == 1) {\n                color = vec4(0.76, 0.7, 0.5, 1);\n            }\n            \n            gl_FragColor = color;\n        }",vert:"\n        precision mediump float;\n        attribute vec2 position;\n        varying vec2 uv;\n        void main() {\n            uv = position;\n            gl_Position = vec4(position, 0, 1);\n        }",uniforms:{data:()=>(a=e.pixels(),l=new Uint8Array(r.i.buffer,a,i*o*4),u({width:i,height:o,data:l}))},attributes:{position:[[-1,4],[-1,-1],[4,-1]]},count:3});return()=>{n.poll(),d()}})({canvas:M,map:b});const Y=()=>{X(),window.animationId=requestAnimationFrame(Y)};Y()},function(t,e,n){"use strict";var i=n.w[t.i];t.exports=i;n(5);i.j()},,,function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return u}));var i=n(2);let r=new("undefined"==typeof TextDecoder?(0,t.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});r.decode();let c=null;function o(t,e){return r.decode((null!==c&&c.buffer===i.i.buffer||(c=new Uint8Array(i.i.buffer)),c).subarray(t,t+e))}const a=Object.freeze({Empty:0,0:"Empty",Sand:1,1:"Sand"});class l{static __wrap(t){const e=Object.create(l.prototype);return e.ptr=t,e}free(){const t=this.ptr;this.ptr=0,i.a(t)}static new(t,e){var n=i.d(t,e);return l.__wrap(n)}paint(t,e,n){i.e(this.ptr,t,e,n)}reset(){i.g(this.ptr)}width(){return i.h(this.ptr)}height(){return i.c(this.ptr)}pixels(){return i.f(this.ptr)}}const u=function(t,e){throw new Error(o(t,e))}}).call(this,n(6)(t))}]]);