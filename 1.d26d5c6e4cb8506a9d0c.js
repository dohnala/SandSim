(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{10:function(t,e,n){"use strict";var r=n.w[t.i];t.exports=r;n(9);r.z()},15:function(t,e,n){"use strict";n.r(e),n.d(e,"canvas",(function(){return P})),n.d(e,"width",(function(){return S})),n.d(e,"height",(function(){return A})),n.d(e,"map",(function(){return D})),n.d(e,"nextTick",(function(){return N}));var r=n(9),i=n(10),a=n(12),o=document.getElementById("fps"),u=document.getElementById("meanFrameTime"),c=document.getElementById("meanRenderTime"),l=document.getElementById("meanTickTime"),s=document.getElementById("lastTickTime"),f={mean:0,delta:0,frames:[],lastFrameTimeStamp:performance.now(),measure:function(){var t=performance.now(),e=t-this.lastFrameTimeStamp;this.lastFrameTimeStamp=t;var n=1/e*1e3;this.delta=e/1e3,this.frames.push(n),this.frames.length>100&&this.frames.shift(),this.mean=v(this.frames)}},h={mean:0,last:0,frames:[],startTime:performance.now(),start:function(){this.startTime=performance.now()},stop:function(){if(!window.paused){var t=performance.now()-this.startTime;this.last=t,this.frames.push(t),this.frames.length>100&&this.frames.shift(),this.mean=v(this.frames)}}},d={mean:0,last:0,frames:[],startTime:performance.now(),start:function(){this.startTime=performance.now()},stop:function(){if(!window.paused){var t=performance.now()-this.startTime;this.last=t,this.frames.push(t),this.frames.length>100&&this.frames.shift(),this.mean=v(this.frames)}}},m={mean:0,last:0,frames:[],startTime:performance.now(),start:function(){this.startTime=performance.now()},stop:function(){var t=performance.now()-this.startTime;this.last=t,s.textContent=window.paused?"".concat(Math.round(this.last),"ms"):"",this.frames.push(t),this.frames.length>100&&this.frames.shift(),this.mean=v(this.frames)}},v=function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e/t.length};setInterval((function(){o.textContent="FPS: ".concat(Math.round(f.mean)),u.textContent="".concat(Math.round(h.mean),"ms"),c.textContent="".concat(Math.round(d.mean),"ms"),l.textContent="".concat(Math.round(m.mean),"ms")}),500);var p=n(14),w=document.getElementById("canvas"),y=r.a.Sand,g=!1,k=p("#play"),b=p("#pause"),x=p("#nextFrame");k.hide(),x.addClass("disabled"),k.click((function(){return _()})),b.click((function(){return _()})),x.click((function(){g&&(m.start(),N(),m.stop())})),p("#reset").click((function(){return D.clear()}));var _=function(){g=!g,window.paused=g,g?(k.show(),b.hide(),x.removeClass("disabled")):(k.hide(),b.show(),x.addClass("disabled"))};p("#emptyElement").change((function(){return y=r.a.Empty})),p("#wallElement").change((function(){return y=r.a.Wall})),p("#sandElement").change((function(){return y=r.a.Sand}));var T=!1,E=null,M=null;w.addEventListener("mousedown",(function(t){t.preventDefault(),T=!0,clearInterval(M),M=window.setInterval((function(){return I(t)}),100),I(t),E=t})),document.body.addEventListener("mouseup",(function(t){clearInterval(M),T&&(t.preventDefault(),E=null,T=!1)})),w.addEventListener("mousemove",(function(t){clearInterval(M),function(t){clearInterval(M),M=window.setInterval((function(){return I(t)}),100);var e={clientX:t.clientX,clientY:t.clientY};if(!T)return;var n=0;if(I(e),E)for(;X(e,E)>1/3;){var r=X(e,E);if(e=Y(e,B(q(C(E,t)),Math.min(1/3,r))),++n>1e3)break;I(e)}E=t}(t)})),w.addEventListener("mouseleave",(function(t){clearInterval(M),E=null}));var I=function(t){if(T){var e=w.getBoundingClientRect(),n=w.width/Math.ceil(window.devicePixelRatio)/e.width,r=w.height/Math.ceil(window.devicePixelRatio)/e.height,i=(t.clientX-e.left)*n,a=(t.clientY-e.top)*r,o=Math.min(Math.floor(i),S-1),u=Math.min(Math.floor(a),A-1);D.insert(o,u,y)}};var X=function(t,e){return Math.sqrt(Math.pow(t.clientX-e.clientX,2)+Math.pow(t.clientY-e.clientY,2),2)},Y=function(t,e){return{clientX:t.clientX+e.clientX,clientY:t.clientY+e.clientY}},C=function(t,e){return{clientX:t.clientX-e.clientX,clientY:t.clientY-e.clientY}},q=function(t){var e=F(t);return{clientX:t.clientX/e,clientY:t.clientY/e}},B=function(t,e){return{clientX:t.clientX*e,clientY:t.clientY*e}},F=function(t){return Math.sqrt(Math.pow(t.clientX,2)+Math.pow(t.clientY,2),2)},S=128,A=128,D=r.b.new(S,A),P=document.getElementById("canvas");P.width=S*Math.ceil(window.devicePixelRatio),P.height=A*Math.ceil(window.devicePixelRatio);var j,O,R,L,U,W,z,J,G,H,K=(O=(j={canvas:P,map:D}).canvas,R=j.map,L=a({canvas:O}),U=R.width(),W=R.height(),z=R.pixels(),J=new Uint8Array(i.q.buffer,z,U*W*4),G=L.texture({width:U,height:W,data:J}),H=L({frag:"\n        precision highp float;\n        uniform sampler2D data;\n        varying vec2 uv;\n        void main() {\n            vec2 textCoord = (uv * vec2(0.5, -0.5)) + vec2(0.5);\n            vec4 data = texture2D(data, textCoord);\n            int element = int((data.r * 255.) + 0.1);\n            vec4 color;\n            \n            // empty\n            if (element == 0) {\n                color = vec4(255, 255, 255, 1);\n            }\n            \n            if (element == 1) {\n                color = vec4(0, 0, 0, 1);\n            }\n            \n            // sand\n            if (element == 2) {\n                color = vec4(0.76, 0.7, 0.5, 1);\n            }\n            \n            gl_FragColor = color;\n        }",vert:"\n        precision mediump float;\n        attribute vec2 position;\n        varying vec2 uv;\n        void main() {\n            uv = position;\n            gl_Position = vec4(position, 0, 1);\n        }",uniforms:{data:function(){return z=R.pixels(),J=new Uint8Array(i.q.buffer,z,U*W*4),G({width:U,height:W,data:J})}},attributes:{position:[[-1,4],[-1,-1],[4,-1]]},count:3}),function(){L.poll(),H()}),N=function(){D.tick(f.delta)};!function t(){f.measure(),h.start(),window.paused||(m.start(),N(),m.stop()),d.start(),K(),d.stop(),h.stop(),window.animationId=requestAnimationFrame(t)}()},9:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return k})),n.d(e,"b",(function(){return b})),n.d(e,"d",(function(){return T})),n.d(e,"e",(function(){return E})),n.d(e,"c",(function(){return M})),n.d(e,"f",(function(){return I})),n.d(e,"g",(function(){return X}));var r=n(10);function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}var u=new Array(32).fill(void 0);function c(t){return u[t]}u.push(void 0,null,!0,!1);var l=u.length;function s(t){var e=c(t);return function(t){t<36||(u[t]=l,l=t)}(t),e}var f=new("undefined"==typeof TextDecoder?(0,t.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});f.decode();var h=null;function d(){return null!==h&&h.buffer===r.q.buffer||(h=new Uint8Array(r.q.buffer)),h}function m(t,e){return f.decode(d().subarray(t,t+e))}var v=0,p=new("undefined"==typeof TextEncoder?(0,t.require)("util").TextEncoder:TextEncoder)("utf-8"),w="function"==typeof p.encodeInto?function(t,e){return p.encodeInto(t,e)}:function(t,e){var n=p.encode(t);return e.set(n),{read:t.length,written:n.length}};var y=null;function g(){return null!==y&&y.buffer===r.q.buffer||(y=new Int32Array(r.q.buffer)),y}var k=Object.freeze({Empty:0,0:"Empty",Wall:1,1:"Wall",Sand:2,2:"Sand"}),b=function(){function t(){i(this,t)}return o(t,[{key:"free",value:function(){var t=this.ptr;this.ptr=0,r.a(t)}},{key:"insert",value:function(t,e,n){r.l(this.ptr,t,e,n)}},{key:"clear",value:function(){r.g(this.ptr)}},{key:"tick",value:function(t){r.o(this.ptr,t)}},{key:"width",value:function(){return r.p(this.ptr)}},{key:"height",value:function(){return r.k(this.ptr)}},{key:"generation",value:function(){return r.h(this.ptr)}},{key:"pixels",value:function(){return r.n(this.ptr)}},{key:"get_pixel",value:function(t,e){var n=r.i(this.ptr,t,e);return x.__wrap(n)}},{key:"get_pixel_state",value:function(t,e){var n=r.j(this.ptr,t,e);return _.__wrap(n)}}],[{key:"__wrap",value:function(e){var n=Object.create(t.prototype);return n.ptr=e,n}},{key:"new",value:function(e,n){var i=r.m(e,n);return t.__wrap(i)}}]),t}(),x=function(){function t(){i(this,t)}return o(t,[{key:"free",value:function(){var t=this.ptr;this.ptr=0,r.b(t)}},{key:"element",value:function(){return r.r(this.ptr)>>>0}}],[{key:"__wrap",value:function(e){var n=Object.create(t.prototype);return n.ptr=e,n}},{key:"new",value:function(e){var n=r.s(e);return t.__wrap(n)}}]),t}(),_=function(){function t(){i(this,t)}return o(t,[{key:"free",value:function(){var t=this.ptr;this.ptr=0,r.c(t)}},{key:"element",value:function(){return r.v(this.ptr)>>>0}},{key:"get_velocity_y",value:function(){return r.w(this.ptr)}},{key:"set_velocity_y",value:function(t){r.y(this.ptr,t)}},{key:"add_velocity_y",value:function(t){r.t(this.ptr,t)}},{key:"clock_flag",value:function(){return 0!==r.u(this.ptr)}}],[{key:"__wrap",value:function(e){var n=Object.create(t.prototype);return n.ptr=e,n}},{key:"new",value:function(e){var n=r.x(e);return t.__wrap(n)}}]),t}(),T=function(){return function(t){l===u.length&&u.push(u.length+1);var e=l;return l=u[e],u[e]=t,e}(new Error)},E=function(t,e){var n=function(t,e,n){if(void 0===n){var r=p.encode(t),i=e(r.length);return d().subarray(i,i+r.length).set(r),v=r.length,i}for(var a=t.length,o=e(a),u=d(),c=0;c<a;c++){var l=t.charCodeAt(c);if(l>127)break;u[o+c]=l}if(c!==a){0!==c&&(t=t.slice(c)),o=n(o,a,a=c+3*t.length);var s=d().subarray(o+c,o+a);c+=w(t,s).written}return v=c,o}(c(e).stack,r.e,r.f),i=v;g()[t/4+1]=i,g()[t/4+0]=n},M=function(t,e){try{console.error(m(t,e))}finally{r.d(t,e)}},I=function(t){s(t)},X=function(t,e){throw new Error(m(t,e))}}).call(this,n(13)(t))}}]);
//# sourceMappingURL=1.d26d5c6e4cb8506a9d0c.js.map