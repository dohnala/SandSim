(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{10:function(t,e,n){"use strict";var r=n.w[t.i];t.exports=r;n(9);r.jb()},15:function(t,e,n){"use strict";n.r(e),n.d(e,"canvas",(function(){return mt})),n.d(e,"config",(function(){return pt})),n.d(e,"map",(function(){return $})),n.d(e,"createMap",(function(){return yt})),n.d(e,"nextTick",(function(){return wt})),n.d(e,"generateSeed",(function(){return dt}));var r=n(9),i=[{key:r.a.Empty,value:{name:"Empty",color:"rgba(255,255,255,1)"}},{key:r.a.Wall,value:{name:"Wall",color:"rgba(0,0,0,1)"}},{key:r.a.Sand,value:{name:"Sand",color:"rgba(194, 178, 127, 1)"}},{key:r.a.Dirt,value:{name:"Dirt",color:"rgba(132, 57, 24, 1)"}},{key:r.a.Water,value:{name:"Water",color:"rgba(44, 100, 230, 1)"}}],a=[64,128,256,512],o=[16,32,64],c=[{key:r.d.EMPTY,value:{name:"Empty"}},{key:r.d.CAVE,value:{name:"Cave"}}],u=document.getElementById("fps"),s=document.getElementById("meanRenderTime"),l=document.getElementById("meanTickTime"),f=document.getElementById("lastTickTime"),v=document.getElementById("meanPixelsProcessed"),h=document.getElementById("lastPixelsProcessed"),d={mean:0,delta:0,frames:[],lastFrameTimeStamp:performance.now(),measure:function(){var t=performance.now(),e=t-this.lastFrameTimeStamp;this.lastFrameTimeStamp=t;var n=1/e*1e3;this.delta=e/1e3,this.frames.push(n),this.frames.length>100&&this.frames.shift(),this.mean=w(this.frames)}},p={mean:0,last:0,frames:[],startTime:performance.now(),start:function(){this.startTime=performance.now()},stop:function(){if(!window.paused){var t=performance.now()-this.startTime;this.last=t,this.frames.push(t),this.frames.length>100&&this.frames.shift(),this.mean=w(this.frames)}}},m={mean:0,last:0,frames:[],startTime:performance.now(),start:function(){this.startTime=performance.now()},stop:function(){var t=performance.now()-this.startTime;this.last=t,f.textContent=window.paused?"".concat(Math.round(this.last),"ms"):"",this.frames.push(t),this.frames.length>100&&this.frames.shift(),this.mean=w(this.frames)}},y={mean:0,last:0,frames:[],measure:function(t){this.last=t,h.textContent=window.paused?"".concat(Math.round(this.last)," \n        (").concat(g(this.last,pt.size*pt.size),"%)"):"",this.frames.push(t),this.frames.length>10&&this.frames.shift(),this.mean=w(this.frames)},reset:function(){this.mean=0,this.last=0,this.frames=[]}},w=function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e/t.length},g=function(t,e){return Math.round(100*t/e)};setInterval((function(){u.textContent="FPS: ".concat(Math.round(d.mean)),s.textContent="".concat(Math.round(p.mean),"ms"),l.textContent="".concat(Math.round(m.mean),"ms"),v.textContent="".concat(Math.round(y.mean)," \n    (").concat(g(Math.round(y.mean),pt.size*pt.size),"%)")}),100);var k=n(13),_=document.getElementById("canvas");k("document").ready((function(){T(),I(),S(),N(),P()}));var b=k("#create"),x=k("#generateSeed"),M=k("#configUseChunks"),C=k("#configChunkSize"),E=!1,z=k("#showActiveChunks");b.click((function(){pt.size=Number(k("#configSize").val()),pt.gravity=lt(k("#configGravity").val(),-1,1),pt.maxVelocity=lt(k("#configMaxVelocity").val(),0,100),pt.useChunks=M.is(":checked"),pt.chunkSize=Number(C.val()),pt.generator=function(t){for(var e in c)if(c.hasOwnProperty(e)&&c[e].value.name===t)return e;return null}(k("#configGenerator").val()),pt.seed=Number(k("#seed").val()),yt(),P()})),x.click((function(){pt.seed=dt(),P()}));var P=function(){k("#configSize").val(pt.size),k("#configGravity").val(pt.gravity),k("#configMaxVelocity").val(pt.maxVelocity),k("#configGenerator").val(c[pt.generator].value.name),k("#seed").val(pt.seed),M.prop("checked",pt.useChunks),C.val(pt.chunkSize),C.prop("disabled",!pt.useChunks)},T=function(){a.forEach((function(t){var e="<option>".concat(t,"</option>");k("#configSize").append(e)}))},I=function(){o.forEach((function(t){var e="<option>".concat(t,"</option>");k("#configChunkSize").append(e)}))},S=function(){for(var t in c)if(c.hasOwnProperty(t)){var e="<option>".concat(c[t].value.name,"</option>");k("#configGenerator").append(e)}};M.change((function(){C.prop("disabled",!this.checked),z.prop("disabled",!this.checked)})),z.change((function(){E=this.checked}));var Y=!1,X=k("#play"),D=k("#pause"),R=k("#nextFrame"),A=k("#reset");X.hide(),R.addClass("disabled"),X.click((function(){return O()})),D.click((function(){return O()})),R.click((function(){return V()})),A.click((function(){return F()})),k("body").keypress((function(t){112===t.keyCode?O():102===t.keyCode?V():114===t.keyCode&&F()}));var O=function(){Y=!Y,window.paused=Y,Y?(X.show(),D.hide(),R.removeClass("disabled")):(X.hide(),D.show(),R.addClass("disabled"))},V=function(){Y&&(m.start(),y.measure(wt()),m.stop())},F=function(){$.clear(),y.reset()},B=null,N=function(){var t=function(t){if(i.hasOwnProperty(t)){var e='\n                <div class="form-check">\n                    <input class="form-check-input" type="radio" name="flexRadioDefault" id="element_'.concat(t,'">\n                    <label class="form-check-label" for="element_').concat(t,'">\n                        <i class="bi bi-square-fill" style="color: ').concat(i[t].value.color,'"></i>\n                        <label>').concat(i[t].value.name,"</label>\n                    </label>\n                </div>");k("#painting").append(e),k("#element_"+t).change((function(){return B=Number(t)}))}};for(var e in i)t(e);B=2,k("#element_2").attr("checked",!0)},W={value:0,step:1,min:0,max:5},j=k("#brushSize");j.on("change",(function(){W.value=lt(Number(k(this).val()),W.min,W.max)})),k(window).bind("mousewheel DOMMouseScroll",(function(t){t.originalEvent.wheelDelta>0||t.originalEvent.detail<0?(W.value=lt(W.value+W.step,W.min,W.max),j.val(W.value)):(W.value=lt(W.value-W.step,W.min,W.max),j.val(W.value))}));var q=null,G=!1,L=null,U=k("#inspectCheck"),J=k("#inspectDetails");J.hide(),U.click((function(){U.prop("checked")?(G=!0,clearInterval(L),L=window.setInterval((function(){return H()}),100)):(G=!1,clearInterval(L))}));var H=function(t){if(G&&q){var e=$.pixel_info(q[0],q[1]);e&&(J.show(),k("#inspectElement").text(i[e.element].value.name),k("#inspectPosition").text("("+q[0]+", "+q[1]+")"),void 0!==e.velocity_x&&void 0!==e.velocity_y?(k("#inspectVelocity").text("("+e.velocity_x+", "+e.velocity_y+")"),k("#inspectVelocityRow").show()):k("#inspectVelocityRow").hide(),void 0!==e.falling?(k("#inspectFalling").text(e.falling),k("#inspectFallingRow").show()):k("#inspectFallingRow").hide(),void 0!==e.not_moved_count?(k("#inspectNotMovedCount").text(e.not_moved_count),k("#inspectNotMovedCountRow").show()):k("#inspectNotMovedCountRow").hide())}else J.hide()},K=!1,Q=null,Z=null;_.addEventListener("mousedown",(function(t){t.preventDefault(),K=!0,clearInterval(Z),Z=window.setInterval((function(){return et(t)}),100),et(t),Q=t})),document.body.addEventListener("mouseup",(function(t){clearInterval(Z),K&&(t.preventDefault(),Q=null,K=!1)})),_.addEventListener("mousemove",(function(t){clearInterval(Z),nt(t),function(t){q=U.prop("checked")?rt(t):null}(t)})),_.addEventListener("mouseleave",(function(t){clearInterval(Z),Q=null,q=null}));var $,tt,et=function(t){if(K){var e=rt(t);$.insert(e[0],e[1],B,W.value)}},nt=function(t){clearInterval(Z),Z=window.setInterval((function(){return et(t)}),100);var e={clientX:t.clientX,clientY:t.clientY};if(K){var n=0;if(et(e),Q)for(;it(e,Q)>1/3;){var r=it(e,Q);if(e=at(e,ut(ct(ot(Q,t)),Math.min(1/3,r))),++n>1e3)break;et(e)}Q=t}},rt=function(t){var e=_.getBoundingClientRect(),n=_.width/Math.ceil(window.devicePixelRatio)/e.width,r=_.height/Math.ceil(window.devicePixelRatio)/e.height,i=(t.clientX-e.left)*n,a=(t.clientY-e.top)*r;return[Math.max(Math.min(Math.floor(i),pt.size-1),0),Math.max(Math.min(Math.floor(a),pt.size-1),0)]},it=function(t,e){return Math.sqrt(Math.pow(t.clientX-e.clientX,2)+Math.pow(t.clientY-e.clientY,2),2)},at=function(t,e){return{clientX:t.clientX+e.clientX,clientY:t.clientY+e.clientY}},ot=function(t,e){return{clientX:t.clientX-e.clientX,clientY:t.clientY-e.clientY}},ct=function(t){var e=st(t);return{clientX:t.clientX/e,clientY:t.clientY/e}},ut=function(t,e){return{clientX:t.clientX*e,clientY:t.clientY*e}},st=function(t){return Math.sqrt(Math.pow(t.clientX,2)+Math.pow(t.clientY,2),2)},lt=function(t,e,n){return Math.min(Math.max(t,e),n)},ft=n(10),vt=n(14),ht=function(t){var e=t.canvas,n=t.map,r=t.config,i=vt({canvas:e}),a=n.config().size,o=n.display(),c=new Uint8Array(ft.ib.buffer,o,a*a*4),u=i.texture({width:a,height:a,data:c}),s=i({frag:"\n        precision highp float;\n        uniform sampler2D data;\n        varying vec2 uv;\n        void main() {\n            vec2 textCoord = (uv * vec2(0.5, -0.5)) + vec2(0.5);\n            vec4 data = texture2D(data, textCoord);\n            int element = int((data.r * 255.) + 0.1);\n            vec4 color;\n            \n            // empty\n            if (element == 0) {\n                color = vec4(255, 255, 255, 1);\n            }\n            \n            if (element == 1) {\n                color = vec4(0, 0, 0, 1);\n            }\n            \n            // sand\n            if (element == 2) {\n                color = vec4(0.76, 0.7, 0.5, 1);\n            }\n            \n            // dirt\n            if (element == 3) {\n                color = vec4(0.52, 0.22, 0.09, 1);\n            }\n            \n            // water\n            if (element == 4) {\n                color = vec4(0.17, 0.39, 0.9, 1);\n            }\n            \n            gl_FragColor = color;\n        }",vert:"\n        precision mediump float;\n        attribute vec2 position;\n        varying vec2 uv;\n        void main() {\n            uv = position;\n            gl_Position = vec4(position, 0, 1);\n        }",uniforms:{data:function(){return o=n.display(),c=new Uint8Array(ft.ib.buffer,o,a*a*4),u({width:a,height:a,data:c})}},attributes:{position:[[-1,4],[-1,-1],[4,-1]]},count:3});var l,f=[];if(r.useChunks)for(var v=r.chunkSize/a,h=0;h<n.chunks_count();h++){var d=n.chunk(h);f.push((l={scale:v,offset:[-1+v+d.x()/r.size*2,1-v-d.y()/r.size*2]},i({frag:"\n            precision mediump float;\n            uniform vec4 color;\n            void main () {\n              gl_FragColor = color;\n            }",vert:"\n            precision mediump float;\n            attribute vec2 position;\n            uniform float scale;\n            uniform vec2 offset;\n            void main () {\n              vec2 p  = position;\n              p *= scale;\n              p += offset;\n              gl_Position = vec4(p, 0, 1);\n            }",attributes:{position:[[-1,-1],[1,-1],[1,1],[-1,1]]},uniforms:{color:[0,1,0,1],scale:l.scale,offset:l.offset},count:4,lineWidth:1,primitive:"line loop"})))}return function(){i.poll(),function(){if(r.useChunks&&E)for(var t=0;t<f.length;t++){n.chunk(t).active_next_tick()&&f[t]()}}(),s()}},dt=function(){return Math.floor(Math.random()*Math.floor(1e4))},pt={size:256,gravity:.2,maxVelocity:10,useChunks:!0,chunkSize:32,generator:r.d.EMPTY,seed:1},mt=document.getElementById("canvas"),yt=function(){$=r.b.new(r.c.new(pt.size,pt.gravity,pt.maxVelocity,pt.useChunks,pt.chunkSize,pt.seed),Number(pt.generator)),mt.width=pt.size*Math.ceil(window.devicePixelRatio),mt.height=pt.size*Math.ceil(window.devicePixelRatio),tt=ht({canvas:mt,map:$,config:pt}),y.reset()};yt();var wt=function(){return $.tick(d.delta)};!function t(){d.measure(),window.paused||(m.start(),y.measure(wt()),m.stop()),p.start(),tt(),p.stop(),window.animationId=requestAnimationFrame(t)}()},9:function(t,e,n){"use strict";(function(t){n.d(e,"d",(function(){return M})),n.d(e,"a",(function(){return C})),n.d(e,"b",(function(){return z})),n.d(e,"c",(function(){return P})),n.d(e,"f",(function(){return I})),n.d(e,"g",(function(){return S})),n.d(e,"e",(function(){return Y})),n.d(e,"h",(function(){return X})),n.d(e,"i",(function(){return D}));var r=n(10);function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}var c=new Array(32).fill(void 0);function u(t){return c[t]}c.push(void 0,null,!0,!1);var s=c.length;function l(t){var e=u(t);return function(t){t<36||(c[t]=s,s=t)}(t),e}var f=new("undefined"==typeof TextDecoder?(0,t.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});f.decode();var v=null;function h(){return null!==v&&v.buffer===r.ib.buffer||(v=new Uint8Array(r.ib.buffer)),v}function d(t,e){return f.decode(h().subarray(t,t+e))}function p(t,e){if(!(t instanceof e))throw new Error("expected instance of ".concat(e.name));return t.ptr}var m=null;function y(){return null!==m&&m.buffer===r.ib.buffer||(m=new Int32Array(r.ib.buffer)),m}var w=null;function g(){return null!==w&&w.buffer===r.ib.buffer||(w=new Float32Array(r.ib.buffer)),w}function k(t){return null==t}var _=0,b=new("undefined"==typeof TextEncoder?(0,t.require)("util").TextEncoder:TextEncoder)("utf-8"),x="function"==typeof b.encodeInto?function(t,e){return b.encodeInto(t,e)}:function(t,e){var n=b.encode(t);return e.set(n),{read:t.length,written:n.length}};var M=Object.freeze({EMPTY:0,0:"EMPTY",CAVE:1,1:"CAVE"}),C=Object.freeze({Empty:0,0:"Empty",Wall:1,1:"Wall",Sand:2,2:"Sand",Dirt:3,3:"Dirt",Water:4,4:"Water"}),E=function(){function t(){i(this,t)}return o(t,[{key:"__destroy_into_raw",value:function(){var t=this.ptr;return this.ptr=0,t}},{key:"free",value:function(){var t=this.__destroy_into_raw();r.a(t)}},{key:"x",value:function(){return r.f(this.ptr)}},{key:"y",value:function(){return r.V(this.ptr)}},{key:"active",value:function(){return 0!==r.T(this.ptr)}},{key:"active_next_tick",value:function(){return 0!==r.U(this.ptr)}}],[{key:"__wrap",value:function(e){var n=Object.create(t.prototype);return n.ptr=e,n}}]),t}(),z=function(){function t(){i(this,t)}return o(t,[{key:"__destroy_into_raw",value:function(){var t=this.ptr;return this.ptr=0,t}},{key:"free",value:function(){var t=this.__destroy_into_raw();r.t(t)}},{key:"insert",value:function(t,e,n,i){r.bb(this.ptr,t,e,n,i)}},{key:"clear",value:function(){r.Y(this.ptr)}},{key:"tick",value:function(){return r.gb(this.ptr)>>>0}},{key:"config",value:function(){var t=r.Z(this.ptr);return P.__wrap(t)}},{key:"display",value:function(){return r.ab(this.ptr)}},{key:"pixel_info",value:function(t,e){var n=r.fb(this.ptr,t,e);return 0===n?void 0:T.__wrap(n)}},{key:"chunks_count",value:function(){return r.X(this.ptr)>>>0}},{key:"chunk",value:function(t){var e=r.W(this.ptr,t);return E.__wrap(e)}}],[{key:"__wrap",value:function(e){var n=Object.create(t.prototype);return n.ptr=e,n}},{key:"new_empty",value:function(e){p(e,P);var n=e.ptr;e.ptr=0;var i=r.eb(n);return t.__wrap(i)}},{key:"new_cave",value:function(e){p(e,P);var n=e.ptr;e.ptr=0;var i=r.db(n);return t.__wrap(i)}},{key:"new",value:function(e,n){p(e,P);var i=e.ptr;e.ptr=0;var a=r.cb(i,n);return t.__wrap(a)}}]),t}(),P=function(){function t(){i(this,t)}return o(t,[{key:"__destroy_into_raw",value:function(){var t=this.ptr;return this.ptr=0,t}},{key:"free",value:function(){var t=this.__destroy_into_raw();r.u(t)}},{key:"size",get:function(){return r.f(this.ptr)},set:function(t){r.B(this.ptr,t)}},{key:"gravity",get:function(){return r.c(this.ptr)},set:function(t){r.y(this.ptr,t)}},{key:"max_velocity",get:function(){return r.d(this.ptr)},set:function(t){r.z(this.ptr,t)}},{key:"use_chunks",get:function(){return 0!==r.g(this.ptr)},set:function(t){r.C(this.ptr,t)}},{key:"chunk_size",get:function(){return r.b(this.ptr)},set:function(t){r.x(this.ptr,t)}},{key:"seed",get:function(){return r.e(this.ptr)},set:function(t){r.A(this.ptr,t)}}],[{key:"__wrap",value:function(e){var n=Object.create(t.prototype);return n.ptr=e,n}},{key:"new",value:function(e,n,i,a,o,c){var u=r.hb(e,n,i,a,o,c);return t.__wrap(u)}}]),t}(),T=function(){function t(){i(this,t)}return o(t,[{key:"__destroy_into_raw",value:function(){var t=this.ptr;return this.ptr=0,t}},{key:"free",value:function(){var t=this.__destroy_into_raw();r.w(t)}},{key:"element",get:function(){return r.l(this.ptr)>>>0},set:function(t){r.H(this.ptr,t)}},{key:"friction",get:function(){try{var t=r.P(-16);r.n(t,this.ptr);var e=y()[t/4+0],n=g()[t/4+1];return 0===e?void 0:n}finally{r.P(16)}},set:function(t){r.J(this.ptr,!k(t),k(t)?0:t)}},{key:"restitution",get:function(){try{var t=r.P(-16);r.q(t,this.ptr);var e=y()[t/4+0],n=g()[t/4+1];return 0===e?void 0:n}finally{r.P(16)}},set:function(t){r.M(this.ptr,!k(t),k(t)?0:t)}},{key:"inertia",get:function(){try{var t=r.P(-16);r.o(t,this.ptr);var e=y()[t/4+0],n=g()[t/4+1];return 0===e?void 0:n}finally{r.P(16)}},set:function(t){r.K(this.ptr,!k(t),k(t)?0:t)}},{key:"velocity_x",get:function(){try{var t=r.P(-16);r.r(t,this.ptr);var e=y()[t/4+0],n=g()[t/4+1];return 0===e?void 0:n}finally{r.P(16)}},set:function(t){r.N(this.ptr,!k(t),k(t)?0:t)}},{key:"velocity_y",get:function(){try{var t=r.P(-16);r.s(t,this.ptr);var e=y()[t/4+0],n=g()[t/4+1];return 0===e?void 0:n}finally{r.P(16)}},set:function(t){r.O(this.ptr,!k(t),k(t)?0:t)}},{key:"falling",get:function(){var t=r.m(this.ptr);return 16777215===t?void 0:0!==t},set:function(t){r.I(this.ptr,k(t)?16777215:t?1:0)}},{key:"not_moved_count",get:function(){var t=r.p(this.ptr);return 16777215===t?void 0:t},set:function(t){r.L(this.ptr,k(t)?16777215:t)}}],[{key:"__wrap",value:function(e){var n=Object.create(t.prototype);return n.ptr=e,n}}]),t}(),I=function(){return function(t){s===c.length&&c.push(c.length+1);var e=s;return s=c[e],c[e]=t,e}(new Error)},S=function(t,e){var n=function(t,e,n){if(void 0===n){var r=b.encode(t),i=e(r.length);return h().subarray(i,i+r.length).set(r),_=r.length,i}for(var a=t.length,o=e(a),c=h(),u=0;u<a;u++){var s=t.charCodeAt(u);if(s>127)break;c[o+u]=s}if(u!==a){0!==u&&(t=t.slice(u)),o=n(o,a,a=u+3*t.length);var l=h().subarray(o+u,o+a);u+=x(t,l).written}return _=u,o}(u(e).stack,r.R,r.S),i=_;y()[t/4+1]=i,y()[t/4+0]=n},Y=function(t,e){try{console.error(d(t,e))}finally{r.Q(t,e)}},X=function(t){l(t)},D=function(t,e){throw new Error(d(t,e))}}).call(this,n(12)(t))}}]);
//# sourceMappingURL=1.fca09050cc8965fcf304.js.map