(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{10:function(t,e,n){"use strict";var r=n.w[t.i];t.exports=r;n(9);r.z()},15:function(t,e,n){"use strict";n.r(e),n.d(e,"canvas",(function(){return et})),n.d(e,"config",(function(){return tt})),n.d(e,"map",(function(){return A})),n.d(e,"createMap",(function(){return nt})),n.d(e,"nextTick",(function(){return rt}));var r=n(9),i=n(10),a=n(12),o=[{key:0,value:{name:"Empty",color:"rgba(255,255,255,1)"}},{key:1,value:{name:"Wall",color:"rgba(0,0,0,1)"}},{key:2,value:{name:"Sand",color:"rgba(194, 178, 127, 1)"}}],c=document.getElementById("fps"),u=document.getElementById("meanFrameTime"),l=document.getElementById("meanRenderTime"),s=document.getElementById("meanTickTime"),f=document.getElementById("lastTickTime"),h={mean:0,delta:0,frames:[],lastFrameTimeStamp:performance.now(),measure:function(){var t=performance.now(),e=t-this.lastFrameTimeStamp;this.lastFrameTimeStamp=t;var n=1/e*1e3;this.delta=e/1e3,this.frames.push(n),this.frames.length>100&&this.frames.shift(),this.mean=p(this.frames)}},v={mean:0,last:0,frames:[],startTime:performance.now(),start:function(){this.startTime=performance.now()},stop:function(){if(!window.paused){var t=performance.now()-this.startTime;this.last=t,this.frames.push(t),this.frames.length>100&&this.frames.shift(),this.mean=p(this.frames)}}},d={mean:0,last:0,frames:[],startTime:performance.now(),start:function(){this.startTime=performance.now()},stop:function(){if(!window.paused){var t=performance.now()-this.startTime;this.last=t,this.frames.push(t),this.frames.length>100&&this.frames.shift(),this.mean=p(this.frames)}}},m={mean:0,last:0,frames:[],startTime:performance.now(),start:function(){this.startTime=performance.now()},stop:function(){var t=performance.now()-this.startTime;this.last=t,f.textContent=window.paused?"".concat(Math.round(this.last),"ms"):"",this.frames.push(t),this.frames.length>100&&this.frames.shift(),this.mean=p(this.frames)}},p=function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e/t.length};setInterval((function(){c.textContent="FPS: ".concat(Math.round(h.mean)),u.textContent="".concat(Math.round(v.mean),"ms"),l.textContent="".concat(Math.round(d.mean),"ms"),s.textContent="".concat(Math.round(m.mean),"ms")}),500);var w=n(14),y=document.getElementById("canvas"),g=null,_=null,k=!1,b=w("#create"),x=w("#play"),M=w("#pause"),E=w("#nextFrame"),T=w("#reset"),I=w("#inspectCheck"),C=w("#inspectDetails");x.hide(),E.addClass("disabled"),C.hide(),w("document").ready((function(){D(),z(),B()})),b.click((function(){tt.width=$(w("#configWidth").val(),64,512),tt.height=$(w("#configHeight").val(),64,512),tt.gravity=$(w("#configGravity").val(),-1,1),tt.max_velocity=$(w("#configMaxVelocity").val(),0,100),nt(),D()})),x.click((function(){return P()})),M.click((function(){return P()})),E.click((function(){return F()})),T.click((function(){return O()}));var X=!1,Y=null;I.click((function(){I.prop("checked")?(X=!0,clearInterval(Y),Y=window.setInterval((function(){return V()}),100)):(X=!1,clearInterval(Y))}));var B=function(){w("body").keypress((function(t){112===t.keyCode?P():102===t.keyCode?F():114===t.keyCode&&O()}))},D=function(){w("#configWidth").val(tt.width),w("#configHeight").val(tt.height),w("#configGravity").val(tt.gravity),w("#configMaxVelocity").val(tt.max_velocity)},P=function(){k=!k,window.paused=k,k?(x.show(),M.hide(),E.removeClass("disabled")):(x.hide(),M.show(),E.addClass("disabled"))},F=function(){k&&(m.start(),rt(),m.stop())},O=function(){A.clear()};w("#emptyElement").change((function(){return g=r.a.Empty})),w("#wallElement").change((function(){return g=r.a.Wall})),w("#sandElement").change((function(){return g=r.a.Sand}));var S=!1,j=null,q=null;y.addEventListener("mousedown",(function(t){t.preventDefault(),S=!0,clearInterval(q),q=window.setInterval((function(){return W(t)}),100),W(t),j=t})),document.body.addEventListener("mouseup",(function(t){clearInterval(q),S&&(t.preventDefault(),j=null,S=!1)})),y.addEventListener("mousemove",(function(t){clearInterval(q),L(t),U(t)})),y.addEventListener("mouseleave",(function(t){clearInterval(q),j=null,_=null}));var A,R,W=function(t){if(S){var e=G(t);A.insert(e[0],e[1],g)}},L=function(t){clearInterval(q),q=window.setInterval((function(){return W(t)}),100);var e={clientX:t.clientX,clientY:t.clientY};if(S){var n=0;if(W(e),j)for(;H(e,j)>1/3;){var r=H(e,j);if(e=J(e,Q(K(N(j,t)),Math.min(1/3,r))),++n>1e3)break;W(e)}j=t}},U=function(t){_=I.prop("checked")?G(t):null},V=function(t){if(X&&_){var e=A.pixel_state(_[0],_[1]);e&&(C.show(),w("#inspectElement").text(o[e.element()].value.name),w("#inspectPosition").text("("+_[0]+", "+_[1]+")"),w("#inspectVelocity").text("(0, "+e.velocity_y()+")"))}else C.hide()},z=function(){var t=function(t){if(o.hasOwnProperty(t)){var e='\n                <div class="form-check">\n                    <input class="form-check-input" type="radio" name="flexRadioDefault" id="element_'.concat(t,'">\n                    <label class="form-check-label" for="element_').concat(t,'">\n                        <i class="bi bi-square-fill" style="color: ').concat(o[t].value.color,'"></i>\n                        <label>').concat(o[t].value.name,"</label>\n                    </label>\n                </div>");w("#painting").append(e),w("#element_"+t).change((function(){return g=Number(t)}))}};for(var e in o)t(e);g=2,w("#element_2").attr("checked",!0)},G=function(t){var e=y.getBoundingClientRect(),n=y.width/Math.ceil(window.devicePixelRatio)/e.width,r=y.height/Math.ceil(window.devicePixelRatio)/e.height,i=(t.clientX-e.left)*n,a=(t.clientY-e.top)*r;return[Math.max(Math.min(Math.floor(i),tt.width-1),0),Math.max(Math.min(Math.floor(a),tt.height-1),0)]},H=function(t,e){return Math.sqrt(Math.pow(t.clientX-e.clientX,2)+Math.pow(t.clientY-e.clientY,2),2)},J=function(t,e){return{clientX:t.clientX+e.clientX,clientY:t.clientY+e.clientY}},N=function(t,e){return{clientX:t.clientX-e.clientX,clientY:t.clientY-e.clientY}},K=function(t){var e=Z(t);return{clientX:t.clientX/e,clientY:t.clientY/e}},Q=function(t,e){return{clientX:t.clientX*e,clientY:t.clientY*e}},Z=function(t){return Math.sqrt(Math.pow(t.clientX,2)+Math.pow(t.clientY,2),2)},$=function(t,e,n){return Math.min(Math.max(t,e),n)},tt={width:128,height:128,gravity:.2,max_velocity:5},et=document.getElementById("canvas"),nt=function(){var t,e,n,o,c,u,l,s,f,h;A=r.b.new(r.c.new(tt.width,tt.height,tt.gravity,tt.max_velocity,Math.floor(Math.random()*Math.floor(1e4)))),et.width=tt.width*Math.ceil(window.devicePixelRatio),et.height=tt.height*Math.ceil(window.devicePixelRatio),e=(t={canvas:et,map:A}).canvas,n=t.map,o=a({canvas:e}),c=n.width(),u=n.height(),l=n.pixels(),s=new Uint8Array(i.s.buffer,l,c*u*4),f=o.texture({width:c,height:u,data:s}),h=o({frag:"\n        precision highp float;\n        uniform sampler2D data;\n        varying vec2 uv;\n        void main() {\n            vec2 textCoord = (uv * vec2(0.5, -0.5)) + vec2(0.5);\n            vec4 data = texture2D(data, textCoord);\n            int element = int((data.r * 255.) + 0.1);\n            vec4 color;\n            \n            // empty\n            if (element == 0) {\n                color = vec4(255, 255, 255, 1);\n            }\n            \n            if (element == 1) {\n                color = vec4(0, 0, 0, 1);\n            }\n            \n            // sand\n            if (element == 2) {\n                color = vec4(0.76, 0.7, 0.5, 1);\n            }\n            \n            gl_FragColor = color;\n        }",vert:"\n        precision mediump float;\n        attribute vec2 position;\n        varying vec2 uv;\n        void main() {\n            uv = position;\n            gl_Position = vec4(position, 0, 1);\n        }",uniforms:{data:function(){return l=n.pixels(),s=new Uint8Array(i.s.buffer,l,c*u*4),f({width:c,height:u,data:s})}},attributes:{position:[[-1,4],[-1,-1],[4,-1]]},count:3}),R=function(){o.poll(),h()}};nt();var rt=function(){A.tick(h.delta)};!function t(){h.measure(),v.start(),window.paused||(m.start(),rt(),m.stop()),d.start(),R(),d.stop(),v.stop(),window.animationId=requestAnimationFrame(t)}()},9:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return _})),n.d(e,"b",(function(){return k})),n.d(e,"c",(function(){return b})),n.d(e,"e",(function(){return E})),n.d(e,"f",(function(){return T})),n.d(e,"d",(function(){return I})),n.d(e,"g",(function(){return C})),n.d(e,"h",(function(){return X}));var r=n(10);function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}var c=new Array(32).fill(void 0);function u(t){return c[t]}c.push(void 0,null,!0,!1);var l=c.length;function s(t){var e=u(t);return function(t){t<36||(c[t]=l,l=t)}(t),e}var f=new("undefined"==typeof TextDecoder?(0,t.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});f.decode();var h=null;function v(){return null!==h&&h.buffer===r.s.buffer||(h=new Uint8Array(r.s.buffer)),h}function d(t,e){return f.decode(v().subarray(t,t+e))}var m=0,p=new("undefined"==typeof TextEncoder?(0,t.require)("util").TextEncoder:TextEncoder)("utf-8"),w="function"==typeof p.encodeInto?function(t,e){return p.encodeInto(t,e)}:function(t,e){var n=p.encode(t);return e.set(n),{read:t.length,written:n.length}};var y=null;function g(){return null!==y&&y.buffer===r.s.buffer||(y=new Int32Array(r.s.buffer)),y}var _=Object.freeze({Empty:0,0:"Empty",Wall:1,1:"Wall",Sand:2,2:"Sand"}),k=function(){function t(){i(this,t)}return o(t,[{key:"__destroy_into_raw",value:function(){var t=this.ptr;return this.ptr=0,t}},{key:"free",value:function(){var t=this.__destroy_into_raw();r.a(t)}},{key:"insert",value:function(t,e,n){r.k(this.ptr,t,e,n)}},{key:"clear",value:function(){r.h(this.ptr)}},{key:"tick",value:function(){r.p(this.ptr)}},{key:"width",value:function(){return r.q(this.ptr)}},{key:"height",value:function(){return r.j(this.ptr)}},{key:"generation",value:function(){return r.i(this.ptr)}},{key:"pixels",value:function(){return r.o(this.ptr)}},{key:"pixel",value:function(t,e){var n=r.m(this.ptr,t,e);return x.__wrap(n)}},{key:"pixel_state",value:function(t,e){var n=r.n(this.ptr,t,e);return M.__wrap(n)}}],[{key:"__wrap",value:function(e){var n=Object.create(t.prototype);return n.ptr=e,n}},{key:"new",value:function(e){!function(t,e){if(!(t instanceof e))throw new Error("expected instance of ".concat(e.name));t.ptr}(e,b);var n=e.ptr;e.ptr=0;var i=r.l(n);return t.__wrap(i)}}]),t}(),b=function(){function t(){i(this,t)}return o(t,[{key:"__destroy_into_raw",value:function(){var t=this.ptr;return this.ptr=0,t}},{key:"free",value:function(){var t=this.__destroy_into_raw();r.b(t)}}],[{key:"__wrap",value:function(e){var n=Object.create(t.prototype);return n.ptr=e,n}},{key:"new",value:function(e,n,i,a,o){var c=r.r(e,n,i,a,o);return t.__wrap(c)}}]),t}(),x=function(){function t(){i(this,t)}return o(t,[{key:"__destroy_into_raw",value:function(){var t=this.ptr;return this.ptr=0,t}},{key:"free",value:function(){var t=this.__destroy_into_raw();r.c(t)}},{key:"element",value:function(){return r.t(this.ptr)>>>0}}],[{key:"__wrap",value:function(e){var n=Object.create(t.prototype);return n.ptr=e,n}},{key:"new",value:function(e){var n=r.u(e);return t.__wrap(n)}}]),t}(),M=function(){function t(){i(this,t)}return o(t,[{key:"__destroy_into_raw",value:function(){var t=this.ptr;return this.ptr=0,t}},{key:"free",value:function(){var t=this.__destroy_into_raw();r.d(t)}},{key:"element",value:function(){return r.w(this.ptr)>>>0}},{key:"velocity_y",value:function(){return r.y(this.ptr)}},{key:"clock_flag",value:function(){return 0!==r.v(this.ptr)}}],[{key:"__wrap",value:function(e){var n=Object.create(t.prototype);return n.ptr=e,n}},{key:"new",value:function(e){var n=r.x(e);return t.__wrap(n)}}]),t}(),E=function(){return function(t){l===c.length&&c.push(c.length+1);var e=l;return l=c[e],c[e]=t,e}(new Error)},T=function(t,e){var n=function(t,e,n){if(void 0===n){var r=p.encode(t),i=e(r.length);return v().subarray(i,i+r.length).set(r),m=r.length,i}for(var a=t.length,o=e(a),c=v(),u=0;u<a;u++){var l=t.charCodeAt(u);if(l>127)break;c[o+u]=l}if(u!==a){0!==u&&(t=t.slice(u)),o=n(o,a,a=u+3*t.length);var s=v().subarray(o+u,o+a);u+=w(t,s).written}return m=u,o}(u(e).stack,r.f,r.g),i=m;g()[t/4+1]=i,g()[t/4+0]=n},I=function(t,e){try{console.error(d(t,e))}finally{r.e(t,e)}},C=function(t){s(t)},X=function(t,e){throw new Error(d(t,e))}}).call(this,n(13)(t))}}]);
//# sourceMappingURL=1.5f4cb392d8f2882bdb10.js.map