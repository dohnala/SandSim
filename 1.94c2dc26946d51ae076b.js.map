{"version":3,"sources":["webpack:///./render.js","webpack:///./performance.js","webpack:///./ui.js","webpack:///./main.js","webpack:///../engine/pkg/engine_bg.js"],"names":["reglBuilder","require","fpsLabel","document","getElementById","meanFrameTimeLabel","meanRenderTimeLabel","meanTickTimeLabel","lastTickTimeLabel","fps","mean","delta","frames","lastFrameTimeStamp","performance","now","measure","diff","this","push","length","shift","measureMean","frameTime","last","startTime","start","stop","window","paused","renderTime","tickTime","textContent","Math","round","array","sum","i","setInterval","$","canvas","selectedElement","Element","Sand","createButton","playButton","pauseButton","nextFrameButton","hide","addClass","ready","updateCreateForm","click","config","width","clamp","val","height","gravity","max_velocity","createMap","togglePause","nextTick","map","clear","show","removeClass","change","Empty","Wall","painting","lastPaint","repeat","addEventListener","event","preventDefault","clearInterval","paint","body","startEvent","clientX","clientY","eventDistance","d","add","scale","norm","sub","min","smoothPaint","boundingRect","getBoundingClientRect","scaleX","ceil","devicePixelRatio","scaleY","canvasLeft","left","canvasTop","top","x","max","floor","y","insert","drawMap","a","b","sqrt","pow","mag","magnitude","s","value","regl","ptr_pixels","pixels","dataTexture","Map","MapConfig","Uint8Array","memory","buffer","texture","data","frag","vert","uniforms","attributes","position","count","poll","tick","renderLoop","animationId","requestAnimationFrame","heap","Array","fill","undefined","getObject","idx","heap_next","takeObject","ret","dropObject","cachedTextDecoder","TextDecoder","module","ignoreBOM","fatal","decode","cachegetUint8Memory0","getUint8Memory0","wasm","getStringFromWasm0","ptr","len","subarray","addHeapObject","obj","handleError","f","apply","arguments","e","WASM_VECTOR_LEN","cachedTextEncoder","TextEncoder","encodeString","encodeInto","arg","view","buf","encode","set","read","written","cachegetInt32Memory0","getInt32Memory0","Int32Array","Object","freeze","__destroy_into_raw","element","Pixel","__wrap","PixelState","create","prototype","instance","klass","Error","name","_assertClass","ptr0","__wbg_getRandomValues_57e4008f45f0e105","arg0","arg1","getRandomValues","__wbindgen_object_drop_ref","__wbg_randomFillSync_d90848a552cbd666","arg2","randomFillSync","__wbg_self_f865985e662246aa","self","__wbg_static_accessor_MODULE_39947eb3fe77895f","__wbg_require_c59851dfa0dc7e78","__wbg_crypto_bfb05100db79193b","crypto","__wbg_msCrypto_f6dddc6ae048b7e2","msCrypto","__wbindgen_is_undefined","__wbg_buffer_e35e010c3ba9f945","__wbg_length_2cfa674c2a529bc1","__wbg_new_139e70222494b1ff","__wbg_set_d771848e3c7935bb","__wbg_newwithlength_e0c461e90217842c","__wbg_subarray_8a52f1c1a11c02a8","__wbg_new_59cb74e423758ede","__wbg_stack_558ba5917b466edd","malloc","realloc","mem","offset","code","charCodeAt","slice","passStringToWasm0","stack","len0","__wbg_error_4bb6c2a97407129a","console","error","__wbindgen_throw","__wbindgen_memory"],"mappings":"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","file":"1.94c2dc26946d51ae076b.js","sourcesContent":["const reglBuilder = require(\"regl\");\r\nimport { memory } from \"./node_modules/engine/engine_bg\";\r\n\r\nlet startWebGL = ({ canvas, map }) => {\r\n    const regl = reglBuilder({\r\n        canvas\r\n    });\r\n\r\n    const width = map.width();\r\n    const height = map.height();\r\n    let ptr_pixels = map.pixels();\r\n    let pixels = new Uint8Array(memory.buffer, ptr_pixels, width * height * 4);\r\n    const dataTexture = regl.texture({ width, height, data: pixels });\r\n\r\n    let drawMap = regl({\r\n        frag: `\r\n        precision highp float;\r\n        uniform sampler2D data;\r\n        varying vec2 uv;\r\n        void main() {\r\n            vec2 textCoord = (uv * vec2(0.5, -0.5)) + vec2(0.5);\r\n            vec4 data = texture2D(data, textCoord);\r\n            int element = int((data.r * 255.) + 0.1);\r\n            vec4 color;\r\n            \r\n            // empty\r\n            if (element == 0) {\r\n                color = vec4(255, 255, 255, 1);\r\n            }\r\n            \r\n            if (element == 1) {\r\n                color = vec4(0, 0, 0, 1);\r\n            }\r\n            \r\n            // sand\r\n            if (element == 2) {\r\n                color = vec4(0.76, 0.7, 0.5, 1);\r\n            }\r\n            \r\n            gl_FragColor = color;\r\n        }`,\r\n\r\n        vert: `\r\n        precision mediump float;\r\n        attribute vec2 position;\r\n        varying vec2 uv;\r\n        void main() {\r\n            uv = position;\r\n            gl_Position = vec4(position, 0, 1);\r\n        }`,\r\n\r\n        uniforms: {\r\n            data: () => {\r\n                ptr_pixels = map.pixels();\r\n                pixels = new Uint8Array(memory.buffer, ptr_pixels, width * height * 4);\r\n\r\n                return dataTexture({width, height, data: pixels});\r\n            },\r\n        },\r\n\r\n        attributes: {\r\n            position: [[-1, 4], [-1, -1], [4, -1]]\r\n        },\r\n\r\n        count: 3,\r\n    });\r\n\r\n    return () => {\r\n        regl.poll();\r\n        drawMap();\r\n    };\r\n};\r\n\r\nexport { startWebGL};","const MEAN_FRAMES_SIZE = 100;\r\n\r\nlet fpsLabel = document.getElementById(\"fps\");\r\nlet meanFrameTimeLabel = document.getElementById(\"meanFrameTime\");\r\nlet meanRenderTimeLabel = document.getElementById(\"meanRenderTime\");\r\nlet meanTickTimeLabel = document.getElementById(\"meanTickTime\");\r\nlet lastTickTimeLabel = document.getElementById(\"lastTickTime\");\r\n\r\nconst fps = {\r\n    mean: 0,\r\n    delta: 0,\r\n    frames: [],\r\n    lastFrameTimeStamp: performance.now(),\r\n\r\n    measure() {\r\n        const now = performance.now();\r\n        const diff = now - this.lastFrameTimeStamp;\r\n        this.lastFrameTimeStamp = now;\r\n        const fps = (1 / diff) * 1000;\r\n        this.delta = diff / 1000;\r\n\r\n        this.frames.push(fps);\r\n        if (this.frames.length > MEAN_FRAMES_SIZE) {\r\n            this.frames.shift();\r\n        }\r\n\r\n        this.mean = measureMean(this.frames);\r\n    }\r\n}\r\n\r\nconst frameTime =  {\r\n    mean: 0,\r\n    last: 0,\r\n    frames: [],\r\n    startTime:  performance.now(),\r\n\r\n    start() {\r\n        this.startTime = performance.now();\r\n    },\r\n\r\n    stop() {\r\n        if (window.paused) return;\r\n\r\n        const now = performance.now();\r\n        const frameTime = now - this.startTime;\r\n\r\n        this.last = frameTime;\r\n\r\n        this.frames.push(frameTime);\r\n        if (this.frames.length > MEAN_FRAMES_SIZE) {\r\n            this.frames.shift();\r\n        }\r\n\r\n        this.mean = measureMean(this.frames);\r\n    }\r\n}\r\n\r\nconst renderTime = {\r\n    mean: 0,\r\n    last: 0,\r\n    frames: [],\r\n    startTime:  performance.now(),\r\n\r\n    start() {\r\n        this.startTime = performance.now();\r\n    },\r\n\r\n    stop() {\r\n        if (window.paused) return;\r\n\r\n        const now = performance.now();\r\n        const frameTime = now - this.startTime;\r\n\r\n        this.last = frameTime;\r\n\r\n        this.frames.push(frameTime);\r\n        if (this.frames.length > MEAN_FRAMES_SIZE) {\r\n            this.frames.shift();\r\n        }\r\n\r\n        this.mean = measureMean(this.frames);\r\n    }\r\n}\r\n\r\nconst tickTime = {\r\n    mean: 0,\r\n    last: 0,\r\n    frames: [],\r\n    startTime:  performance.now(),\r\n\r\n    start() {\r\n        this.startTime = performance.now();\r\n    },\r\n\r\n    stop() {\r\n        const now = performance.now();\r\n        const frameTime = now - this.startTime;\r\n\r\n        this.last = frameTime;\r\n\r\n        lastTickTimeLabel.textContent = window.paused ? `${Math.round(this.last)}ms` : \"\";\r\n\r\n        this.frames.push(frameTime);\r\n        if (this.frames.length > MEAN_FRAMES_SIZE) {\r\n            this.frames.shift();\r\n        }\r\n\r\n        this.mean = measureMean(this.frames);\r\n    }\r\n}\r\n\r\nconst measureMean = array => {\r\n    let sum = 0;\r\n\r\n    for (let i = 0; i < array.length; i++) {\r\n        sum += array[i];\r\n    }\r\n\r\n    return  sum / array.length;\r\n}\r\n\r\nconst updateLabels = () => {\r\n    fpsLabel.textContent = `FPS: ${Math.round(fps.mean)}`;\r\n    meanFrameTimeLabel.textContent = `${Math.round(frameTime.mean)}ms`;\r\n    meanRenderTimeLabel.textContent = `${Math.round(renderTime.mean)}ms`;\r\n    meanTickTimeLabel.textContent = `${Math.round(tickTime.mean)}ms`;\r\n}\r\n\r\nsetInterval(updateLabels, 500);\r\n\r\nexport { fps, frameTime, renderTime, tickTime};","import {tickTime} from \"./performance\";\r\n\r\nvar $ = require( \"jquery\" );\r\n\r\nimport {config, createMap, map, nextTick} from \"./main.js\";\r\nimport { Element } from \"./node_modules/engine/engine.js\";\r\n\r\nconst canvas = document.getElementById(\"canvas\");\r\n\r\nlet selectedElement = Element.Sand;\r\n\r\nlet paused = false;\r\nlet createButton = $('#create')\r\nlet playButton = $('#play')\r\nlet pauseButton = $('#pause')\r\nlet nextFrameButton = $('#nextFrame')\r\n\r\nplayButton.hide();\r\nnextFrameButton.addClass(\"disabled\");\r\n\r\n$('document').ready(function(){\r\n    updateCreateForm();\r\n});\r\n\r\ncreateButton.click(() => {\r\n    config.width = clamp($('#configWidth').val(), 64, 512);\r\n    config.height = clamp($('#configHeight').val(), 64, 512);\r\n    config.gravity = clamp($('#configGravity').val(), -1, 1);\r\n    config.max_velocity = clamp($('#configMaxVelocity').val(), 0, 100);\r\n\r\n    createMap()\r\n    updateCreateForm();\r\n});\r\nplayButton.click(() => togglePause());\r\npauseButton.click(() => togglePause());\r\n\r\nnextFrameButton.click(() => {\r\n    if (paused) {\r\n        tickTime.start();\r\n        nextTick();\r\n        tickTime.stop();\r\n    }\r\n});\r\n\r\n$('#reset').click(() => map.clear());\r\n\r\nconst updateCreateForm = () => {\r\n    $('#configWidth').val(config.width);\r\n    $('#configHeight').val(config.height);\r\n    $('#configGravity').val(config.gravity);\r\n    $('#configMaxVelocity').val(config.max_velocity);\r\n}\r\n\r\nconst togglePause = () => {\r\n    paused = !paused;\r\n    window.paused = paused;\r\n\r\n    if (paused) {\r\n        playButton.show();\r\n        pauseButton.hide();\r\n        nextFrameButton.removeClass(\"disabled\");\r\n    } else {\r\n        playButton.hide();\r\n        pauseButton.show();\r\n        nextFrameButton.addClass(\"disabled\");\r\n    }\r\n}\r\n\r\n$('#emptyElement').change(() => selectedElement = Element.Empty);\r\n$('#wallElement').change(() => selectedElement = Element.Wall);\r\n$('#sandElement').change(() => selectedElement = Element.Sand);\r\n\r\nlet painting = false;\r\nlet lastPaint = null;\r\nlet repeat = null;\r\n\r\ncanvas.addEventListener(\"mousedown\", event => {\r\n    event.preventDefault();\r\n    painting = true;\r\n    clearInterval(repeat);\r\n    repeat = window.setInterval(() => paint(event), 100);\r\n    paint(event);\r\n    lastPaint = event;\r\n});\r\n\r\ndocument.body.addEventListener(\"mouseup\", event => {\r\n    clearInterval(repeat);\r\n    if (painting) {\r\n        event.preventDefault();\r\n        lastPaint = null;\r\n        painting = false;\r\n    }\r\n});\r\n\r\ncanvas.addEventListener(\"mousemove\", event => {\r\n    clearInterval(repeat);\r\n    smoothPaint(event);\r\n});\r\n\r\ncanvas.addEventListener(\"mouseleave\", event => {\r\n    clearInterval(repeat);\r\n    lastPaint = null;\r\n});\r\n\r\nconst paint = event => {\r\n    if (!painting) {\r\n        return;\r\n    }\r\n    const boundingRect = canvas.getBoundingClientRect();\r\n\r\n    const scaleX = canvas.width / Math.ceil(window.devicePixelRatio) / boundingRect.width;\r\n    const scaleY = canvas.height / Math.ceil(window.devicePixelRatio) / boundingRect.height;\r\n\r\n    const canvasLeft = (event.clientX - boundingRect.left) * scaleX;\r\n    const canvasTop = (event.clientY - boundingRect.top) * scaleY;\r\n\r\n    const x = Math.max(Math.min(Math.floor(canvasLeft), config.width - 1), 0);\r\n    const y = Math.max(Math.min(Math.floor(canvasTop), config.height - 1), 0);\r\n\r\n    map.insert(x, y, selectedElement);\r\n};\r\n\r\nfunction smoothPaint(event) {\r\n    clearInterval(repeat);\r\n    repeat = window.setInterval(() => paint(event), 100);\r\n\r\n    let startEvent = { clientX: event.clientX, clientY: event.clientY };\r\n\r\n    if (!painting) {\r\n        return;\r\n    }\r\n\r\n    let i = 0;\r\n    paint(startEvent);\r\n\r\n    if (lastPaint) {\r\n        while (eventDistance(startEvent, lastPaint) > 1 / 3) {\r\n            let d = eventDistance(startEvent, lastPaint);\r\n            startEvent = add(\r\n                startEvent,\r\n                scale(norm(sub(lastPaint, event)), Math.min(1 / 3, d))\r\n            );\r\n            i++;\r\n            if (i > 1000) {\r\n                break;\r\n            }\r\n            paint(startEvent);\r\n        }\r\n    }\r\n    lastPaint = event;\r\n}\r\n\r\nconst eventDistance = (a, b) => {\r\n    return Math.sqrt(\r\n        Math.pow(a.clientX - b.clientX, 2) + Math.pow(a.clientY - b.clientY, 2),\r\n        2\r\n    );\r\n};\r\n\r\nconst add = (a, b) => {\r\n    return { clientX: a.clientX + b.clientX, clientY: a.clientY + b.clientY };\r\n};\r\n\r\nconst sub = (a, b) => {\r\n    return { clientX: a.clientX - b.clientX, clientY: a.clientY - b.clientY };\r\n};\r\n\r\nconst norm = a => {\r\n    let mag = magnitude(a);\r\n    return { clientX: a.clientX / mag, clientY: a.clientY / mag };\r\n};\r\n\r\nconst scale = (a, s) => {\r\n    return { clientX: a.clientX * s, clientY: a.clientY * s };\r\n};\r\n\r\nconst magnitude = a => {\r\n    return Math.sqrt(Math.pow(a.clientX, 2) + Math.pow(a.clientY, 2), 2);\r\n};\r\n\r\nconst clamp = function(value, min, max) {\r\n    return Math.min(Math.max(value, min), max);\r\n};","import {Map, MapConfig} from \"./node_modules/engine/engine.js\";\r\nimport { startWebGL } from \"./render\";\r\nimport {} from \"./ui\";\r\nimport {fps, frameTime, renderTime, tickTime} from \"./performance\";\r\n\r\nlet config = {\r\n    width: 128,\r\n    height: 128,\r\n    gravity: 0.2,\r\n    max_velocity: 5\r\n}\r\n\r\nlet map;\r\nlet drawMap;\r\n\r\nconst canvas = document.getElementById(\"canvas\");\r\n\r\nconst createMap = () => {\r\n    map = Map.new(MapConfig.new(config.width, config.height, config.gravity, config.max_velocity));\r\n    canvas.width = config.width * Math.ceil(window.devicePixelRatio);\r\n    canvas.height = config.height * Math.ceil(window.devicePixelRatio);\r\n    drawMap = startWebGL({ canvas, map });\r\n}\r\n\r\ncreateMap();\r\n\r\nconst renderLoop = () => {\r\n    fps.measure();\r\n    frameTime.start();\r\n\r\n    if (!window.paused) {\r\n        tickTime.start();\r\n        nextTick();\r\n        tickTime.stop();\r\n    }\r\n\r\n    renderTime.start();\r\n    drawMap();\r\n    renderTime.stop();\r\n\r\n    frameTime.stop();\r\n\r\n    window.animationId = requestAnimationFrame(renderLoop);\r\n};\r\n\r\nconst nextTick = () => {\r\n    map.tick(fps.delta);\r\n}\r\n\r\nrenderLoop();\r\n\r\nexport { canvas, config, map, createMap, nextTick};","import * as wasm from './engine_bg.wasm';\n\nconst heap = new Array(32).fill(undefined);\n\nheap.push(undefined, null, true, false);\n\nfunction getObject(idx) { return heap[idx]; }\n\nlet heap_next = heap.length;\n\nfunction dropObject(idx) {\n    if (idx < 36) return;\n    heap[idx] = heap_next;\n    heap_next = idx;\n}\n\nfunction takeObject(idx) {\n    const ret = getObject(idx);\n    dropObject(idx);\n    return ret;\n}\n\nconst lTextDecoder = typeof TextDecoder === 'undefined' ? (0, module.require)('util').TextDecoder : TextDecoder;\n\nlet cachedTextDecoder = new lTextDecoder('utf-8', { ignoreBOM: true, fatal: true });\n\ncachedTextDecoder.decode();\n\nlet cachegetUint8Memory0 = null;\nfunction getUint8Memory0() {\n    if (cachegetUint8Memory0 === null || cachegetUint8Memory0.buffer !== wasm.memory.buffer) {\n        cachegetUint8Memory0 = new Uint8Array(wasm.memory.buffer);\n    }\n    return cachegetUint8Memory0;\n}\n\nfunction getStringFromWasm0(ptr, len) {\n    return cachedTextDecoder.decode(getUint8Memory0().subarray(ptr, ptr + len));\n}\n\nfunction addHeapObject(obj) {\n    if (heap_next === heap.length) heap.push(heap.length + 1);\n    const idx = heap_next;\n    heap_next = heap[idx];\n\n    heap[idx] = obj;\n    return idx;\n}\n\nfunction _assertClass(instance, klass) {\n    if (!(instance instanceof klass)) {\n        throw new Error(`expected instance of ${klass.name}`);\n    }\n    return instance.ptr;\n}\n\nfunction handleError(f) {\n    return function () {\n        try {\n            return f.apply(this, arguments);\n\n        } catch (e) {\n            wasm.__wbindgen_exn_store(addHeapObject(e));\n        }\n    };\n}\n\nfunction getArrayU8FromWasm0(ptr, len) {\n    return getUint8Memory0().subarray(ptr / 1, ptr / 1 + len);\n}\n\nlet WASM_VECTOR_LEN = 0;\n\nconst lTextEncoder = typeof TextEncoder === 'undefined' ? (0, module.require)('util').TextEncoder : TextEncoder;\n\nlet cachedTextEncoder = new lTextEncoder('utf-8');\n\nconst encodeString = (typeof cachedTextEncoder.encodeInto === 'function'\n    ? function (arg, view) {\n    return cachedTextEncoder.encodeInto(arg, view);\n}\n    : function (arg, view) {\n    const buf = cachedTextEncoder.encode(arg);\n    view.set(buf);\n    return {\n        read: arg.length,\n        written: buf.length\n    };\n});\n\nfunction passStringToWasm0(arg, malloc, realloc) {\n\n    if (realloc === undefined) {\n        const buf = cachedTextEncoder.encode(arg);\n        const ptr = malloc(buf.length);\n        getUint8Memory0().subarray(ptr, ptr + buf.length).set(buf);\n        WASM_VECTOR_LEN = buf.length;\n        return ptr;\n    }\n\n    let len = arg.length;\n    let ptr = malloc(len);\n\n    const mem = getUint8Memory0();\n\n    let offset = 0;\n\n    for (; offset < len; offset++) {\n        const code = arg.charCodeAt(offset);\n        if (code > 0x7F) break;\n        mem[ptr + offset] = code;\n    }\n\n    if (offset !== len) {\n        if (offset !== 0) {\n            arg = arg.slice(offset);\n        }\n        ptr = realloc(ptr, len, len = offset + arg.length * 3);\n        const view = getUint8Memory0().subarray(ptr + offset, ptr + len);\n        const ret = encodeString(arg, view);\n\n        offset += ret.written;\n    }\n\n    WASM_VECTOR_LEN = offset;\n    return ptr;\n}\n\nlet cachegetInt32Memory0 = null;\nfunction getInt32Memory0() {\n    if (cachegetInt32Memory0 === null || cachegetInt32Memory0.buffer !== wasm.memory.buffer) {\n        cachegetInt32Memory0 = new Int32Array(wasm.memory.buffer);\n    }\n    return cachegetInt32Memory0;\n}\n/**\n*/\nexport const Element = Object.freeze({ Empty:0,\"0\":\"Empty\",Wall:1,\"1\":\"Wall\",Sand:2,\"2\":\"Sand\", });\n/**\n*/\nexport class Map {\n\n    static __wrap(ptr) {\n        const obj = Object.create(Map.prototype);\n        obj.ptr = ptr;\n\n        return obj;\n    }\n\n    __destroy_into_raw() {\n        const ptr = this.ptr;\n        this.ptr = 0;\n\n        return ptr;\n    }\n\n    free() {\n        const ptr = this.__destroy_into_raw();\n        wasm.__wbg_map_free(ptr);\n    }\n    /**\n    * @param {MapConfig} config\n    * @returns {Map}\n    */\n    static new(config) {\n        _assertClass(config, MapConfig);\n        var ptr0 = config.ptr;\n        config.ptr = 0;\n        var ret = wasm.map_new(ptr0);\n        return Map.__wrap(ret);\n    }\n    /**\n    * @param {number} x\n    * @param {number} y\n    * @param {number} element\n    */\n    insert(x, y, element) {\n        wasm.map_insert(this.ptr, x, y, element);\n    }\n    /**\n    */\n    clear() {\n        wasm.map_clear(this.ptr);\n    }\n    /**\n    */\n    tick() {\n        wasm.map_tick(this.ptr);\n    }\n    /**\n    * @returns {number}\n    */\n    width() {\n        var ret = wasm.map_width(this.ptr);\n        return ret;\n    }\n    /**\n    * @returns {number}\n    */\n    height() {\n        var ret = wasm.map_height(this.ptr);\n        return ret;\n    }\n    /**\n    * @returns {number}\n    */\n    generation() {\n        var ret = wasm.map_generation(this.ptr);\n        return ret;\n    }\n    /**\n    * @returns {number}\n    */\n    pixels() {\n        var ret = wasm.map_pixels(this.ptr);\n        return ret;\n    }\n    /**\n    * @param {number} x\n    * @param {number} y\n    * @returns {Pixel}\n    */\n    pixel(x, y) {\n        var ret = wasm.map_pixel(this.ptr, x, y);\n        return Pixel.__wrap(ret);\n    }\n    /**\n    * @param {number} x\n    * @param {number} y\n    * @returns {PixelState}\n    */\n    pixel_state(x, y) {\n        var ret = wasm.map_pixel_state(this.ptr, x, y);\n        return PixelState.__wrap(ret);\n    }\n}\n/**\n*/\nexport class MapConfig {\n\n    static __wrap(ptr) {\n        const obj = Object.create(MapConfig.prototype);\n        obj.ptr = ptr;\n\n        return obj;\n    }\n\n    __destroy_into_raw() {\n        const ptr = this.ptr;\n        this.ptr = 0;\n\n        return ptr;\n    }\n\n    free() {\n        const ptr = this.__destroy_into_raw();\n        wasm.__wbg_mapconfig_free(ptr);\n    }\n    /**\n    * @param {number} width\n    * @param {number} height\n    * @param {number} gravity\n    * @param {number} max_velocity\n    * @returns {MapConfig}\n    */\n    static new(width, height, gravity, max_velocity) {\n        var ret = wasm.mapconfig_new(width, height, gravity, max_velocity);\n        return MapConfig.__wrap(ret);\n    }\n}\n/**\n*/\nexport class Pixel {\n\n    static __wrap(ptr) {\n        const obj = Object.create(Pixel.prototype);\n        obj.ptr = ptr;\n\n        return obj;\n    }\n\n    __destroy_into_raw() {\n        const ptr = this.ptr;\n        this.ptr = 0;\n\n        return ptr;\n    }\n\n    free() {\n        const ptr = this.__destroy_into_raw();\n        wasm.__wbg_pixel_free(ptr);\n    }\n    /**\n    * @param {number} element\n    * @returns {Pixel}\n    */\n    static new(element) {\n        var ret = wasm.pixel_new(element);\n        return Pixel.__wrap(ret);\n    }\n    /**\n    * @returns {number}\n    */\n    element() {\n        var ret = wasm.pixel_element(this.ptr);\n        return ret >>> 0;\n    }\n}\n/**\n*/\nexport class PixelState {\n\n    static __wrap(ptr) {\n        const obj = Object.create(PixelState.prototype);\n        obj.ptr = ptr;\n\n        return obj;\n    }\n\n    __destroy_into_raw() {\n        const ptr = this.ptr;\n        this.ptr = 0;\n\n        return ptr;\n    }\n\n    free() {\n        const ptr = this.__destroy_into_raw();\n        wasm.__wbg_pixelstate_free(ptr);\n    }\n    /**\n    * @param {number} element\n    * @returns {PixelState}\n    */\n    static new(element) {\n        var ret = wasm.pixelstate_new(element);\n        return PixelState.__wrap(ret);\n    }\n    /**\n    * @returns {number}\n    */\n    element() {\n        var ret = wasm.pixelstate_element(this.ptr);\n        return ret >>> 0;\n    }\n    /**\n    * @returns {number}\n    */\n    velocity_y() {\n        var ret = wasm.pixelstate_velocity_y(this.ptr);\n        return ret;\n    }\n    /**\n    * @returns {boolean}\n    */\n    clock_flag() {\n        var ret = wasm.pixelstate_clock_flag(this.ptr);\n        return ret !== 0;\n    }\n}\n\nexport const __wbg_getRandomValues_57e4008f45f0e105 = handleError(function(arg0, arg1) {\n    getObject(arg0).getRandomValues(getObject(arg1));\n});\n\nexport const __wbindgen_object_drop_ref = function(arg0) {\n    takeObject(arg0);\n};\n\nexport const __wbg_randomFillSync_d90848a552cbd666 = handleError(function(arg0, arg1, arg2) {\n    getObject(arg0).randomFillSync(getArrayU8FromWasm0(arg1, arg2));\n});\n\nexport const __wbg_self_f865985e662246aa = handleError(function() {\n    var ret = self.self;\n    return addHeapObject(ret);\n});\n\nexport const __wbg_static_accessor_MODULE_39947eb3fe77895f = function() {\n    var ret = module;\n    return addHeapObject(ret);\n};\n\nexport const __wbg_require_c59851dfa0dc7e78 = handleError(function(arg0, arg1, arg2) {\n    var ret = getObject(arg0).require(getStringFromWasm0(arg1, arg2));\n    return addHeapObject(ret);\n});\n\nexport const __wbg_crypto_bfb05100db79193b = function(arg0) {\n    var ret = getObject(arg0).crypto;\n    return addHeapObject(ret);\n};\n\nexport const __wbg_msCrypto_f6dddc6ae048b7e2 = function(arg0) {\n    var ret = getObject(arg0).msCrypto;\n    return addHeapObject(ret);\n};\n\nexport const __wbindgen_is_undefined = function(arg0) {\n    var ret = getObject(arg0) === undefined;\n    return ret;\n};\n\nexport const __wbg_buffer_e35e010c3ba9f945 = function(arg0) {\n    var ret = getObject(arg0).buffer;\n    return addHeapObject(ret);\n};\n\nexport const __wbg_length_2cfa674c2a529bc1 = function(arg0) {\n    var ret = getObject(arg0).length;\n    return ret;\n};\n\nexport const __wbg_new_139e70222494b1ff = function(arg0) {\n    var ret = new Uint8Array(getObject(arg0));\n    return addHeapObject(ret);\n};\n\nexport const __wbg_set_d771848e3c7935bb = function(arg0, arg1, arg2) {\n    getObject(arg0).set(getObject(arg1), arg2 >>> 0);\n};\n\nexport const __wbg_newwithlength_e0c461e90217842c = function(arg0) {\n    var ret = new Uint8Array(arg0 >>> 0);\n    return addHeapObject(ret);\n};\n\nexport const __wbg_subarray_8a52f1c1a11c02a8 = function(arg0, arg1, arg2) {\n    var ret = getObject(arg0).subarray(arg1 >>> 0, arg2 >>> 0);\n    return addHeapObject(ret);\n};\n\nexport const __wbg_new_59cb74e423758ede = function() {\n    var ret = new Error();\n    return addHeapObject(ret);\n};\n\nexport const __wbg_stack_558ba5917b466edd = function(arg0, arg1) {\n    var ret = getObject(arg1).stack;\n    var ptr0 = passStringToWasm0(ret, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n    var len0 = WASM_VECTOR_LEN;\n    getInt32Memory0()[arg0 / 4 + 1] = len0;\n    getInt32Memory0()[arg0 / 4 + 0] = ptr0;\n};\n\nexport const __wbg_error_4bb6c2a97407129a = function(arg0, arg1) {\n    try {\n        console.error(getStringFromWasm0(arg0, arg1));\n    } finally {\n        wasm.__wbindgen_free(arg0, arg1);\n    }\n};\n\nexport const __wbindgen_throw = function(arg0, arg1) {\n    throw new Error(getStringFromWasm0(arg0, arg1));\n};\n\nexport const __wbindgen_memory = function() {\n    var ret = wasm.memory;\n    return addHeapObject(ret);\n};\n\n"],"sourceRoot":""}