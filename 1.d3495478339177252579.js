(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[,function(n,t,e){"use strict";e.r(t),e.d(t,"canvas",(function(){return b})),e.d(t,"width",(function(){return m})),e.d(t,"height",(function(){return y})),e.d(t,"map",(function(){return g}));var i=e(3),r=e(2),a=e(5),o=document.getElementById("canvas"),c=!1,u=null,l=null;o.addEventListener("mousedown",(function(n){n.preventDefault(),c=!0,clearInterval(l),l=window.setInterval((function(){return f(n)}),100),f(n),u=n})),document.body.addEventListener("mouseup",(function(n){clearInterval(l),c&&(n.preventDefault(),u=null,c=!1)})),o.addEventListener("mousemove",(function(n){clearInterval(l),function(n){clearInterval(l),l=window.setInterval((function(){return f(n)}),100);var t={clientX:n.clientX,clientY:n.clientY};if(!c)return;var e=0;if(f(t),u)for(;d(t,u)>1/3;){var i=d(t,u);if(t=v(t,p(h(s(u,n)),Math.min(1/3,i))),++e>1e3)break;f(t)}u=n}(n)})),o.addEventListener("mouseleave",(function(n){clearInterval(l),u=null}));var f=function(n){if(c){var t=o.getBoundingClientRect(),e=o.width/Math.ceil(window.devicePixelRatio)/t.width,r=o.height/Math.ceil(window.devicePixelRatio)/t.height,a=(n.clientX-t.left)*e,u=(n.clientY-t.top)*r,l=Math.min(Math.floor(a),m-1),f=Math.min(Math.floor(u),y-1);g.insert(l,f,i.a.Sand)}};var d=function(n,t){return Math.sqrt(Math.pow(n.clientX-t.clientX,2)+Math.pow(n.clientY-t.clientY,2),2)},v=function(n,t){return{clientX:n.clientX+t.clientX,clientY:n.clientY+t.clientY}},s=function(n,t){return{clientX:n.clientX-t.clientX,clientY:n.clientY-t.clientY}},h=function(n){var t=w(n);return{clientX:n.clientX/t,clientY:n.clientY/t}},p=function(n,t){return{clientX:n.clientX*t,clientY:n.clientY*t}},w=function(n){return Math.sqrt(Math.pow(n.clientX,2)+Math.pow(n.clientY,2),2)},m=100,y=100,g=i.b.new(m,y),b=document.getElementById("canvas");b.width=m*Math.ceil(window.devicePixelRatio),b.height=y*Math.ceil(window.devicePixelRatio);var M,k,X,Y,x,E,I,j,D,P,_=(k=(M={canvas:b,map:g}).canvas,X=M.map,Y=a({canvas:k}),x=X.width(),E=X.height(),I=X.pixels(),j=new Uint8Array(r.j.buffer,I,x*E*4),D=Y.texture({width:x,height:E,data:j}),P=Y({frag:"\n        precision highp float;\n        uniform sampler2D data;\n        varying vec2 uv;\n        void main() {\n            vec2 textCoord = (uv * vec2(0.5, -0.5)) + vec2(0.5);\n            vec4 data = texture2D(data, textCoord);\n            int element = int((data.r * 255.) + 0.1);\n            vec4 color;\n            \n            // empty\n            if (element == 0) {\n                color = vec4(1, 1, 1, 1);\n            }\n            \n            if (element == 1) {\n                color = vec4(0, 0, 0, 1);\n            }\n            \n            // sand\n            if (element == 2) {\n                color = vec4(0.76, 0.7, 0.5, 1);\n            }\n            \n            gl_FragColor = color;\n        }",vert:"\n        precision mediump float;\n        attribute vec2 position;\n        varying vec2 uv;\n        void main() {\n            uv = position;\n            gl_Position = vec4(position, 0, 1);\n        }",uniforms:{data:function(){return I=X.pixels(),j=new Uint8Array(r.j.buffer,I,x*E*4),D({width:x,height:E,data:j})}},attributes:{position:[[-1,4],[-1,-1],[4,-1]]},count:3}),function(){Y.poll(),P()});!function n(){window.paused||g.tick(),_(),window.animationId=requestAnimationFrame(n)}()},function(n,t,e){"use strict";var i=e.w[n.i];n.exports=i;e(3);i.k()},function(n,t,e){"use strict";(function(n){e.d(t,"a",(function(){return d})),e.d(t,"b",(function(){return v})),e.d(t,"c",(function(){return s})),e.d(t,"d",(function(){return h}));var i=e(2);function r(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function a(n,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function o(n,t,e){return t&&a(n.prototype,t),e&&a(n,e),n}var c=new("undefined"==typeof TextDecoder?(0,n.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});c.decode();var u=null;function l(n,t){return c.decode((null!==u&&u.buffer===i.j.buffer||(u=new Uint8Array(i.j.buffer)),u).subarray(n,n+t))}var f,d=Object.freeze({Empty:0,0:"Empty",Wall:1,1:"Wall",Sand:2,2:"Sand"}),v=function(){function n(){r(this,n)}return o(n,[{key:"free",value:function(){var n=this.ptr;this.ptr=0,i.a(n)}},{key:"insert",value:function(n,t,e){i.e(this.ptr,n,t,e)}},{key:"clear",value:function(){i.c(this.ptr)}},{key:"tick",value:function(){i.h(this.ptr)}},{key:"width",value:function(){return i.i(this.ptr)}},{key:"height",value:function(){return i.d(this.ptr)}},{key:"pixels",value:function(){return i.g(this.ptr)}}],[{key:"__wrap",value:function(t){var e=Object.create(n.prototype);return e.ptr=t,e}},{key:"new",value:function(t,e){var r=i.f(t,e);return n.__wrap(r)}}]),n}(),s="function"==typeof Math.random?Math.random:(f="Math.random",function(){throw new Error("".concat(f," is not defined"))}),h=function(n,t){throw new Error(l(n,t))}}).call(this,e(6)(n))}]]);
//# sourceMappingURL=1.d3495478339177252579.js.map