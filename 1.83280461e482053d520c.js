(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{10:function(e,n,t){"use strict";var r=t.w[e.i];e.exports=r;t(9);r.P()},15:function(e,n,t){"use strict";t.r(n),t.d(n,"canvas",(function(){return me})),t.d(n,"config",(function(){return de})),t.d(n,"map",(function(){return $})),t.d(n,"createMap",(function(){return ye})),t.d(n,"nextTick",(function(){return we})),t.d(n,"generateSeed",(function(){return pe}));var r=t(9),i=[{key:r.a.Empty,value:{name:"Empty",color:"rgba(255,255,255,1)"}},{key:r.a.Wall,value:{name:"Wall",color:"rgba(0,0,0,1)"}},{key:r.a.Sand,value:{name:"Sand",color:"rgba(194, 178, 127, 1)"}}],a=[64,128,256,512],o=[16,32,64],u=[{key:r.d.EMPTY,value:{name:"Empty"}},{key:r.d.CAVE,value:{name:"Cave"}}],c=document.getElementById("fps"),s=document.getElementById("meanRenderTime"),l=document.getElementById("meanTickTime"),f=document.getElementById("lastTickTime"),v=document.getElementById("meanPixelsProcessed"),h=document.getElementById("lastPixelsProcessed"),p={mean:0,delta:0,frames:[],lastFrameTimeStamp:performance.now(),measure:function(){var e=performance.now(),n=e-this.lastFrameTimeStamp;this.lastFrameTimeStamp=e;var t=1/n*1e3;this.delta=n/1e3,this.frames.push(t),this.frames.length>100&&this.frames.shift(),this.mean=w(this.frames)}},d={mean:0,last:0,frames:[],startTime:performance.now(),start:function(){this.startTime=performance.now()},stop:function(){if(!window.paused){var e=performance.now()-this.startTime;this.last=e,this.frames.push(e),this.frames.length>100&&this.frames.shift(),this.mean=w(this.frames)}}},m={mean:0,last:0,frames:[],startTime:performance.now(),start:function(){this.startTime=performance.now()},stop:function(){var e=performance.now()-this.startTime;this.last=e,f.textContent=window.paused?"".concat(Math.round(this.last),"ms"):"",this.frames.push(e),this.frames.length>100&&this.frames.shift(),this.mean=w(this.frames)}},y={mean:0,last:0,frames:[],measure:function(e){this.last=e,h.textContent=window.paused?"".concat(Math.round(this.last)," \n        (").concat(k(this.last,de.size*de.size),"%)"):"",this.frames.push(e),this.frames.length>100&&this.frames.shift(),this.mean=w(this.frames)},reset:function(){this.mean=0,this.last=0,this.frames=[]}},w=function(e){for(var n=0,t=0;t<e.length;t++)n+=e[t];return n/e.length},k=function(e,n){return Math.round(100*e/n)};setInterval((function(){c.textContent="FPS: ".concat(Math.round(p.mean)),s.textContent="".concat(Math.round(d.mean),"ms"),l.textContent="".concat(Math.round(m.mean),"ms"),v.textContent="".concat(Math.round(y.mean)," \n    (").concat(k(Math.round(y.mean),de.size*de.size),"%)")}),100);var g=t(13),_=document.getElementById("canvas");g("document").ready((function(){I(),S(),P(),J(),T()}));var b=g("#create"),x=g("#generateSeed"),M=g("#configUseChunks"),E=g("#configChunkSize"),C=!1,z=g("#showActiveChunks");b.click((function(){de.size=Number(g("#configSize").val()),de.gravity=le(g("#configGravity").val(),-1,1),de.maxVelocity=le(g("#configMaxVelocity").val(),0,100),de.useChunks=M.is(":checked"),de.chunkSize=Number(E.val()),de.generator=function(e){for(var n in u)if(u.hasOwnProperty(n)&&u[n].value.name===e)return n;return null}(g("#configGenerator").val()),de.seed=Number(g("#seed").val()),ye(),T()})),x.click((function(){de.seed=pe(),T()}));var T=function(){g("#configSize").val(de.size),g("#configGravity").val(de.gravity),g("#configMaxVelocity").val(de.maxVelocity),g("#configGenerator").val(u[de.generator].value.name),g("#seed").val(de.seed),M.prop("checked",de.useChunks),E.val(de.chunkSize),E.prop("disabled",!de.useChunks)},I=function(){a.forEach((function(e){var n="<option>".concat(e,"</option>");g("#configSize").append(n)}))},S=function(){o.forEach((function(e){var n="<option>".concat(e,"</option>");g("#configChunkSize").append(n)}))},P=function(){for(var e in u)if(u.hasOwnProperty(e)){var n="<option>".concat(u[e].value.name,"</option>");g("#configGenerator").append(n)}};M.change((function(){E.prop("disabled",!this.checked),z.prop("disabled",!this.checked)})),z.change((function(){C=this.checked}));var Y=!1,X=g("#play"),O=g("#pause"),A=g("#nextFrame"),D=g("#reset");X.hide(),A.addClass("disabled"),X.click((function(){return B()})),O.click((function(){return B()})),A.click((function(){return V()})),D.click((function(){return j()})),g("body").keypress((function(e){112===e.keyCode?B():102===e.keyCode?V():114===e.keyCode&&j()}));var B=function(){Y=!Y,window.paused=Y,Y?(X.show(),O.hide(),A.removeClass("disabled")):(X.hide(),O.show(),A.addClass("disabled"))},V=function(){Y&&(m.start(),y.measure(we()),m.stop())},j=function(){$.clear(),y.reset()},F=null,J=function(){var e=function(e){if(i.hasOwnProperty(e)){var n='\n                <div class="form-check">\n                    <input class="form-check-input" type="radio" name="flexRadioDefault" id="element_'.concat(e,'">\n                    <label class="form-check-label" for="element_').concat(e,'">\n                        <i class="bi bi-square-fill" style="color: ').concat(i[e].value.color,'"></i>\n                        <label>').concat(i[e].value.name,"</label>\n                    </label>\n                </div>");g("#painting").append(n),g("#element_"+e).change((function(){return F=Number(e)}))}};for(var n in i)e(n);F=2,g("#element_2").attr("checked",!0)},q={value:0,step:1,min:0,max:5},N=g("#brushSize");N.on("change",(function(){q.value=le(Number(g(this).val()),q.min,q.max)})),g(window).bind("mousewheel DOMMouseScroll",(function(e){e.originalEvent.wheelDelta>0||e.originalEvent.detail<0?(q.value=le(q.value+q.step,q.min,q.max),N.val(q.value)):(q.value=le(q.value-q.step,q.min,q.max),N.val(q.value))}));var R=null,G=!1,L=null,W=g("#inspectCheck"),U=g("#inspectDetails");U.hide(),W.click((function(){W.prop("checked")?(G=!0,clearInterval(L),L=window.setInterval((function(){return H()}),100)):(G=!1,clearInterval(L))}));var H=function(e){if(G&&R){var n=$.pixel_state(R[0],R[1]);n&&(U.show(),g("#inspectElement").text(i[n.element()].value.name),g("#inspectPosition").text("("+R[0]+", "+R[1]+")"),g("#inspectVelocity").text("(0, "+n.velocity_y()+")"))}else U.hide()},K=!1,Q=null,Z=null;_.addEventListener("mousedown",(function(e){e.preventDefault(),K=!0,clearInterval(Z),Z=window.setInterval((function(){return ne(e)}),100),ne(e),Q=e})),document.body.addEventListener("mouseup",(function(e){clearInterval(Z),K&&(e.preventDefault(),Q=null,K=!1)})),_.addEventListener("mousemove",(function(e){clearInterval(Z),te(e),function(e){R=W.prop("checked")?re(e):null}(e)})),_.addEventListener("mouseleave",(function(e){clearInterval(Z),Q=null,R=null}));var $,ee,ne=function(e){if(K){var n=re(e);$.insert(n[0],n[1],F,q.value)}},te=function(e){clearInterval(Z),Z=window.setInterval((function(){return ne(e)}),100);var n={clientX:e.clientX,clientY:e.clientY};if(K){var t=0;if(ne(n),Q)for(;ie(n,Q)>1/3;){var r=ie(n,Q);if(n=ae(n,ce(ue(oe(Q,e)),Math.min(1/3,r))),++t>1e3)break;ne(n)}Q=e}},re=function(e){var n=_.getBoundingClientRect(),t=_.width/Math.ceil(window.devicePixelRatio)/n.width,r=_.height/Math.ceil(window.devicePixelRatio)/n.height,i=(e.clientX-n.left)*t,a=(e.clientY-n.top)*r;return[Math.max(Math.min(Math.floor(i),de.size-1),0),Math.max(Math.min(Math.floor(a),de.size-1),0)]},ie=function(e,n){return Math.sqrt(Math.pow(e.clientX-n.clientX,2)+Math.pow(e.clientY-n.clientY,2),2)},ae=function(e,n){return{clientX:e.clientX+n.clientX,clientY:e.clientY+n.clientY}},oe=function(e,n){return{clientX:e.clientX-n.clientX,clientY:e.clientY-n.clientY}},ue=function(e){var n=se(e);return{clientX:e.clientX/n,clientY:e.clientY/n}},ce=function(e,n){return{clientX:e.clientX*n,clientY:e.clientY*n}},se=function(e){return Math.sqrt(Math.pow(e.clientX,2)+Math.pow(e.clientY,2),2)},le=function(e,n,t){return Math.min(Math.max(e,n),t)},fe=t(10),ve=t(14),he=function(e){var n=e.canvas,t=e.map,r=e.config,i=ve({canvas:n}),a=t.size(),o=t.pixels(),u=new Uint8Array(fe.J.buffer,o,a*a*4),c=i.texture({width:a,height:a,data:u}),s=i({frag:"\n        precision highp float;\n        uniform sampler2D data;\n        varying vec2 uv;\n        void main() {\n            vec2 textCoord = (uv * vec2(0.5, -0.5)) + vec2(0.5);\n            vec4 data = texture2D(data, textCoord);\n            int element = int((data.r * 255.) + 0.1);\n            vec4 color;\n            \n            // empty\n            if (element == 0) {\n                color = vec4(255, 255, 255, 1);\n            }\n            \n            if (element == 1) {\n                color = vec4(0, 0, 0, 1);\n            }\n            \n            // sand\n            if (element == 2) {\n                color = vec4(0.76, 0.7, 0.5, 1);\n            }\n            \n            gl_FragColor = color;\n        }",vert:"\n        precision mediump float;\n        attribute vec2 position;\n        varying vec2 uv;\n        void main() {\n            uv = position;\n            gl_Position = vec4(position, 0, 1);\n        }",uniforms:{data:function(){return o=t.pixels(),u=new Uint8Array(fe.J.buffer,o,a*a*4),c({width:a,height:a,data:u})}},attributes:{position:[[-1,4],[-1,-1],[4,-1]]},count:3});var l,f=[];if(r.useChunks)for(var v=r.chunkSize/t.size(),h=0;h<t.chunks_count();h++){var p=t.chunk(h);f.push((l={scale:v,offset:[-1+v+p.x()/r.size*2,1-v-p.y()/r.size*2]},i({frag:"\n            precision mediump float;\n            uniform vec4 color;\n            void main () {\n              gl_FragColor = color;\n            }",vert:"\n            precision mediump float;\n            attribute vec2 position;\n            uniform float scale;\n            uniform vec2 offset;\n            void main () {\n              vec2 p  = position;\n              p *= scale;\n              p += offset;\n              gl_Position = vec4(p, 0, 1);\n            }",attributes:{position:[[-1,-1],[1,-1],[1,1],[-1,1]]},uniforms:{color:[0,1,0,1],scale:l.scale,offset:l.offset},count:4,lineWidth:1,primitive:"line loop"})))}return function(){i.poll(),function(){if(r.useChunks&&C)for(var e=0;e<f.length;e++)f[e]()}(),s()}},pe=function(){return Math.floor(Math.random()*Math.floor(1e4))},de={size:128,gravity:.2,maxVelocity:5,useChunks:!0,chunkSize:16,generator:r.d.EMPTY,seed:1},me=document.getElementById("canvas"),ye=function(){$=r.b.new(r.c.new(de.size,de.gravity,de.maxVelocity,de.useChunks,de.chunkSize,de.seed),Number(de.generator)),me.width=de.size*Math.ceil(window.devicePixelRatio),me.height=de.size*Math.ceil(window.devicePixelRatio),ee=he({canvas:me,map:$,config:de}),y.reset()};ye();var we=function(){return $.tick(p.delta)};!function e(){p.measure(),window.paused||(m.start(),y.measure(we()),m.stop()),d.start(),ee(),d.stop(),window.animationId=requestAnimationFrame(e)}()},9:function(e,n,t){"use strict";(function(e){t.d(n,"d",(function(){return _})),t.d(n,"a",(function(){return b})),t.d(n,"b",(function(){return M})),t.d(n,"c",(function(){return E})),t.d(n,"f",(function(){return T})),t.d(n,"g",(function(){return I})),t.d(n,"e",(function(){return S})),t.d(n,"h",(function(){return P})),t.d(n,"i",(function(){return Y}));var r=t(10);function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function a(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,n,t){return n&&a(e.prototype,n),t&&a(e,t),e}var u=new Array(32).fill(void 0);function c(e){return u[e]}u.push(void 0,null,!0,!1);var s=u.length;function l(e){var n=c(e);return function(e){e<36||(u[e]=s,s=e)}(e),n}var f=new("undefined"==typeof TextDecoder?(0,e.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});f.decode();var v=null;function h(){return null!==v&&v.buffer===r.J.buffer||(v=new Uint8Array(r.J.buffer)),v}function p(e,n){return f.decode(h().subarray(e,e+n))}function d(e,n){if(!(e instanceof n))throw new Error("expected instance of ".concat(n.name));return e.ptr}var m=0,y=new("undefined"==typeof TextEncoder?(0,e.require)("util").TextEncoder:TextEncoder)("utf-8"),w="function"==typeof y.encodeInto?function(e,n){return y.encodeInto(e,n)}:function(e,n){var t=y.encode(e);return n.set(t),{read:e.length,written:t.length}};var k=null;function g(){return null!==k&&k.buffer===r.J.buffer||(k=new Int32Array(r.J.buffer)),k}var _=Object.freeze({EMPTY:0,0:"EMPTY",CAVE:1,1:"CAVE"}),b=Object.freeze({Empty:0,0:"Empty",Wall:1,1:"Wall",Sand:2,2:"Sand"}),x=function(){function e(){i(this,e)}return o(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();r.a(e)}},{key:"x",value:function(){return r.f(this.ptr)}},{key:"y",value:function(){return r.v(this.ptr)}}],[{key:"__wrap",value:function(n){var t=Object.create(e.prototype);return t.ptr=n,t}},{key:"new",value:function(n,t){var i=r.u(n,t);return e.__wrap(i)}}]),e}(),M=function(){function e(){i(this,e)}return o(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();r.h(e)}},{key:"insert",value:function(e,n,t,i){r.A(this.ptr,e,n,t,i)}},{key:"clear",value:function(){r.y(this.ptr)}},{key:"tick",value:function(){return r.H(this.ptr)>>>0}},{key:"size",value:function(){return r.f(this.ptr)}},{key:"generation",value:function(){return r.z(this.ptr)}},{key:"pixels",value:function(){return r.G(this.ptr)}},{key:"pixel",value:function(e,n){var t=r.E(this.ptr,e,n);return C.__wrap(t)}},{key:"pixel_state",value:function(e,n){var t=r.F(this.ptr,e,n);return z.__wrap(t)}},{key:"chunk",value:function(e){var n=r.w(this.ptr,e);return x.__wrap(n)}},{key:"chunks_count",value:function(){return r.x(this.ptr)>>>0}}],[{key:"__wrap",value:function(n){var t=Object.create(e.prototype);return t.ptr=n,t}},{key:"new_empty",value:function(n){d(n,E);var t=n.ptr;n.ptr=0;var i=r.D(t);return e.__wrap(i)}},{key:"new_cave",value:function(n){d(n,E);var t=n.ptr;n.ptr=0;var i=r.C(t);return e.__wrap(i)}},{key:"new",value:function(n,t){d(n,E);var i=n.ptr;n.ptr=0;var a=r.B(i,t);return e.__wrap(a)}}]),e}(),E=function(){function e(){i(this,e)}return o(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();r.i(e)}},{key:"size",get:function(){return r.f(this.ptr)},set:function(e){r.p(this.ptr,e)}},{key:"gravity",get:function(){return r.c(this.ptr)},set:function(e){r.m(this.ptr,e)}},{key:"max_velocity",get:function(){return r.d(this.ptr)},set:function(e){r.n(this.ptr,e)}},{key:"use_chunks",get:function(){return 0!==r.g(this.ptr)},set:function(e){r.q(this.ptr,e)}},{key:"chunk_size",get:function(){return r.b(this.ptr)},set:function(e){r.l(this.ptr,e)}},{key:"seed",get:function(){return r.e(this.ptr)},set:function(e){r.o(this.ptr,e)}}],[{key:"__wrap",value:function(n){var t=Object.create(e.prototype);return t.ptr=n,t}},{key:"new",value:function(n,t,i,a,o,u){var c=r.I(n,t,i,a,o,u);return e.__wrap(c)}}]),e}(),C=function(){function e(){i(this,e)}return o(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();r.j(e)}},{key:"element",value:function(){return r.K(this.ptr)>>>0}}],[{key:"__wrap",value:function(n){var t=Object.create(e.prototype);return t.ptr=n,t}},{key:"new",value:function(n){var t=r.L(n);return e.__wrap(t)}}]),e}(),z=function(){function e(){i(this,e)}return o(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();r.k(e)}},{key:"element",value:function(){return r.N(this.ptr)>>>0}},{key:"velocity_y",value:function(){return r.c(this.ptr)}},{key:"clock_flag",value:function(){return 0!==r.M(this.ptr)}}],[{key:"__wrap",value:function(n){var t=Object.create(e.prototype);return t.ptr=n,t}},{key:"new",value:function(n){var t=r.O(n);return e.__wrap(t)}}]),e}(),T=function(){return function(e){s===u.length&&u.push(u.length+1);var n=s;return s=u[n],u[n]=e,n}(new Error)},I=function(e,n){var t=function(e,n,t){if(void 0===t){var r=y.encode(e),i=n(r.length);return h().subarray(i,i+r.length).set(r),m=r.length,i}for(var a=e.length,o=n(a),u=h(),c=0;c<a;c++){var s=e.charCodeAt(c);if(s>127)break;u[o+c]=s}if(c!==a){0!==c&&(e=e.slice(c)),o=t(o,a,a=c+3*e.length);var l=h().subarray(o+c,o+a);c+=w(e,l).written}return m=c,o}(c(n).stack,r.s,r.t),i=m;g()[e/4+1]=i,g()[e/4+0]=t},S=function(e,n){try{console.error(p(e,n))}finally{r.r(e,n)}},P=function(e){l(e)},Y=function(e,n){throw new Error(p(e,n))}}).call(this,t(12)(e))}}]);
//# sourceMappingURL=1.83280461e482053d520c.js.map