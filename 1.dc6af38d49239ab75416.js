(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{12:function(n,t,e){"use strict";e.r(t),e.d(t,"canvas",(function(){return k})),e.d(t,"width",(function(){return y})),e.d(t,"height",(function(){return m})),e.d(t,"map",(function(){return g}));var r=e(5),i=e(6),u=e(9),o=document.getElementById("canvas"),a=!1,c=null,l=null;o.addEventListener("mousedown",(function(n){n.preventDefault(),a=!0,clearInterval(l),l=window.setInterval((function(){return f(n)}),100),f(n),c=n})),document.body.addEventListener("mouseup",(function(n){clearInterval(l),a&&(n.preventDefault(),c=null,a=!1)})),o.addEventListener("mousemove",(function(n){clearInterval(l),function(n){clearInterval(l),l=window.setInterval((function(){return f(n)}),100);var t={clientX:n.clientX,clientY:n.clientY};if(!a)return;var e=0;if(f(t),c)for(;v(t,c)>1/3;){var r=v(t,c);if(t=d(t,p(h(s(c,n)),Math.min(1/3,r))),++e>1e3)break;f(t)}c=n}(n)})),o.addEventListener("mouseleave",(function(n){clearInterval(l),c=null}));var f=function(n){if(a){var t=o.getBoundingClientRect(),e=o.width/Math.ceil(window.devicePixelRatio)/t.width,i=o.height/Math.ceil(window.devicePixelRatio)/t.height,u=(n.clientX-t.left)*e,c=(n.clientY-t.top)*i,l=Math.min(Math.floor(u),y-1),f=Math.min(Math.floor(c),m-1);g.insert(l,f,r.a.Sand)}};var v=function(n,t){return Math.sqrt(Math.pow(n.clientX-t.clientX,2)+Math.pow(n.clientY-t.clientY,2),2)},d=function(n,t){return{clientX:n.clientX+t.clientX,clientY:n.clientY+t.clientY}},s=function(n,t){return{clientX:n.clientX-t.clientX,clientY:n.clientY-t.clientY}},h=function(n){var t=w(n);return{clientX:n.clientX/t,clientY:n.clientY/t}},p=function(n,t){return{clientX:n.clientX*t,clientY:n.clientY*t}},w=function(n){return Math.sqrt(Math.pow(n.clientX,2)+Math.pow(n.clientY,2),2)},y=100,m=100,g=r.b.new(y,m),k=document.getElementById("canvas");k.width=y*Math.ceil(window.devicePixelRatio),k.height=m*Math.ceil(window.devicePixelRatio);var b,_,x,M,X,Y,E,I,q,A,D=(_=(b={canvas:k,map:g}).canvas,x=b.map,M=u({canvas:_}),X=x.width(),Y=x.height(),E=x.pixels(),I=new Uint8Array(i.q.buffer,E,X*Y*4),q=M.texture({width:X,height:Y,data:I}),A=M({frag:"\n        precision highp float;\n        uniform sampler2D data;\n        varying vec2 uv;\n        void main() {\n            vec2 textCoord = (uv * vec2(0.5, -0.5)) + vec2(0.5);\n            vec4 data = texture2D(data, textCoord);\n            int element = int((data.r * 255.) + 0.1);\n            vec4 color;\n            \n            // empty\n            if (element == 0) {\n                color = vec4(1, 1, 1, 1);\n            }\n            \n            if (element == 1) {\n                color = vec4(0, 0, 0, 1);\n            }\n            \n            // sand\n            if (element == 2) {\n                color = vec4(0.76, 0.7, 0.5, 1);\n            }\n            \n            gl_FragColor = color;\n        }",vert:"\n        precision mediump float;\n        attribute vec2 position;\n        varying vec2 uv;\n        void main() {\n            uv = position;\n            gl_Position = vec4(position, 0, 1);\n        }",uniforms:{data:function(){return E=x.pixels(),I=new Uint8Array(i.q.buffer,E,X*Y*4),q({width:X,height:Y,data:I})}},attributes:{position:[[-1,4],[-1,-1],[4,-1]]},count:3}),function(){M.poll(),A()});!function n(){window.paused||g.tick(),D(),window.animationId=requestAnimationFrame(n)}()},5:function(n,t,e){"use strict";(function(n){e.d(t,"a",(function(){return k})),e.d(t,"b",(function(){return b})),e.d(t,"d",(function(){return M})),e.d(t,"e",(function(){return X})),e.d(t,"c",(function(){return Y})),e.d(t,"f",(function(){return E})),e.d(t,"g",(function(){return I}));var r=e(6);function i(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function u(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function o(n,t,e){return t&&u(n.prototype,t),e&&u(n,e),n}var a=new Array(32).fill(void 0);function c(n){return a[n]}a.push(void 0,null,!0,!1);var l=a.length;function f(n){var t=c(n);return function(n){n<36||(a[n]=l,l=n)}(n),t}var v=new("undefined"==typeof TextDecoder?(0,n.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});v.decode();var d=null;function s(){return null!==d&&d.buffer===r.q.buffer||(d=new Uint8Array(r.q.buffer)),d}function h(n,t){return v.decode(s().subarray(n,n+t))}var p=0,w=new("undefined"==typeof TextEncoder?(0,n.require)("util").TextEncoder:TextEncoder)("utf-8"),y="function"==typeof w.encodeInto?function(n,t){return w.encodeInto(n,t)}:function(n,t){var e=w.encode(n);return t.set(e),{read:n.length,written:e.length}};var m=null;function g(){return null!==m&&m.buffer===r.q.buffer||(m=new Int32Array(r.q.buffer)),m}var k=Object.freeze({Empty:0,0:"Empty",Wall:1,1:"Wall",Sand:2,2:"Sand"}),b=function(){function n(){i(this,n)}return o(n,[{key:"free",value:function(){var n=this.ptr;this.ptr=0,r.a(n)}},{key:"insert",value:function(n,t,e){r.l(this.ptr,n,t,e)}},{key:"clear",value:function(){r.g(this.ptr)}},{key:"tick",value:function(){r.o(this.ptr)}},{key:"width",value:function(){return r.p(this.ptr)}},{key:"height",value:function(){return r.k(this.ptr)}},{key:"generation",value:function(){return r.h(this.ptr)}},{key:"pixels",value:function(){return r.n(this.ptr)}},{key:"get_pixel",value:function(n,t){var e=r.i(this.ptr,n,t);return _.__wrap(e)}},{key:"get_pixel_state",value:function(n,t){var e=r.j(this.ptr,n,t);return x.__wrap(e)}}],[{key:"__wrap",value:function(t){var e=Object.create(n.prototype);return e.ptr=t,e}},{key:"new",value:function(t,e){var i=r.m(t,e);return n.__wrap(i)}}]),n}(),_=function(){function n(){i(this,n)}return o(n,[{key:"free",value:function(){var n=this.ptr;this.ptr=0,r.b(n)}},{key:"element",value:function(){return r.r(this.ptr)>>>0}}],[{key:"__wrap",value:function(t){var e=Object.create(n.prototype);return e.ptr=t,e}},{key:"new",value:function(t){var e=r.s(t);return n.__wrap(e)}}]),n}(),x=function(){function n(){i(this,n)}return o(n,[{key:"free",value:function(){var n=this.ptr;this.ptr=0,r.c(n)}},{key:"element",value:function(){return r.r(this.ptr)>>>0}},{key:"clock",value:function(){return r.t(this.ptr)}}],[{key:"__wrap",value:function(t){var e=Object.create(n.prototype);return e.ptr=t,e}},{key:"new",value:function(t){var e=r.s(t);return n.__wrap(e)}}]),n}(),M=function(){return function(n){l===a.length&&a.push(a.length+1);var t=l;return l=a[t],a[t]=n,t}(new Error)},X=function(n,t){var e=function(n,t,e){if(void 0===e){var r=w.encode(n),i=t(r.length);return s().subarray(i,i+r.length).set(r),p=r.length,i}for(var u=n.length,o=t(u),a=s(),c=0;c<u;c++){var l=n.charCodeAt(c);if(l>127)break;a[o+c]=l}if(c!==u){0!==c&&(n=n.slice(c)),o=e(o,u,u=c+3*n.length);var f=s().subarray(o+c,o+u);c+=y(n,f).written}return p=c,o}(c(t).stack,r.e,r.f),i=p;g()[n/4+1]=i,g()[n/4+0]=e},Y=function(n,t){try{console.error(h(n,t))}finally{r.d(n,t)}},E=function(n){f(n)},I=function(n,t){throw new Error(h(n,t))}}).call(this,e(10)(n))},6:function(n,t,e){"use strict";var r=e.w[n.i];n.exports=r;e(5);r.u()}}]);
//# sourceMappingURL=1.dc6af38d49239ab75416.js.map