(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{10:function(n,e,t){"use strict";var r=t.w[n.i];n.exports=r;t(9);r.u()},15:function(n,e,t){"use strict";t.r(e),t.d(e,"canvas",(function(){return Y})),t.d(e,"width",(function(){return E})),t.d(e,"height",(function(){return M})),t.d(e,"map",(function(){return X})),t.d(e,"nextTick",(function(){return L}));var r=t(9),i=t(10),u=t(12),a=t(14),c=document.getElementById("canvas"),o=r.a.Sand,l=!1,f=a("#play"),v=a("#pause"),d=a("#nextFrame");f.hide(),d.addClass("disabled"),f.click((function(){return s()})),v.click((function(){return s()})),d.click((function(){l&&L()})),a("#reset").click((function(){return X.clear()}));var s=function(){l=!l,window.paused=l,l?(f.show(),v.hide(),d.removeClass("disabled")):(f.hide(),v.show(),d.addClass("disabled"))};a("#emptyElement").change((function(){return o=r.a.Empty})),a("#wallElement").change((function(){return o=r.a.Wall})),a("#sandElement").change((function(){return o=r.a.Sand}));var h=!1,p=null,w=null;c.addEventListener("mousedown",(function(n){n.preventDefault(),h=!0,clearInterval(w),w=window.setInterval((function(){return y(n)}),100),y(n),p=n})),document.body.addEventListener("mouseup",(function(n){clearInterval(w),h&&(n.preventDefault(),p=null,h=!1)})),c.addEventListener("mousemove",(function(n){clearInterval(w),function(n){clearInterval(w),w=window.setInterval((function(){return y(n)}),100);var e={clientX:n.clientX,clientY:n.clientY};if(!h)return;var t=0;if(y(e),p)for(;m(e,p)>1/3;){var r=m(e,p);if(e=g(e,x(b(k(p,n)),Math.min(1/3,r))),++t>1e3)break;y(e)}p=n}(n)})),c.addEventListener("mouseleave",(function(n){clearInterval(w),p=null}));var y=function(n){if(h){var e=c.getBoundingClientRect(),t=c.width/Math.ceil(window.devicePixelRatio)/e.width,r=c.height/Math.ceil(window.devicePixelRatio)/e.height,i=(n.clientX-e.left)*t,u=(n.clientY-e.top)*r,a=Math.min(Math.floor(i),E-1),l=Math.min(Math.floor(u),M-1);X.insert(a,l,o)}};var m=function(n,e){return Math.sqrt(Math.pow(n.clientX-e.clientX,2)+Math.pow(n.clientY-e.clientY,2),2)},g=function(n,e){return{clientX:n.clientX+e.clientX,clientY:n.clientY+e.clientY}},k=function(n,e){return{clientX:n.clientX-e.clientX,clientY:n.clientY-e.clientY}},b=function(n){var e=_(n);return{clientX:n.clientX/e,clientY:n.clientY/e}},x=function(n,e){return{clientX:n.clientX*e,clientY:n.clientY*e}},_=function(n){return Math.sqrt(Math.pow(n.clientX,2)+Math.pow(n.clientY,2),2)},E=100,M=100,X=r.b.new(E,M),Y=document.getElementById("canvas");Y.width=E*Math.ceil(window.devicePixelRatio),Y.height=M*Math.ceil(window.devicePixelRatio);var I,q,C,T,A,D,j,O,P,R,B=(q=(I={canvas:Y,map:X}).canvas,C=I.map,T=u({canvas:q}),A=C.width(),D=C.height(),j=C.pixels(),O=new Uint8Array(i.q.buffer,j,A*D*4),P=T.texture({width:A,height:D,data:O}),R=T({frag:"\n        precision highp float;\n        uniform sampler2D data;\n        varying vec2 uv;\n        void main() {\n            vec2 textCoord = (uv * vec2(0.5, -0.5)) + vec2(0.5);\n            vec4 data = texture2D(data, textCoord);\n            int element = int((data.r * 255.) + 0.1);\n            vec4 color;\n            \n            // empty\n            if (element == 0) {\n                color = vec4(255, 255, 255, 1);\n            }\n            \n            if (element == 1) {\n                color = vec4(0, 0, 0, 1);\n            }\n            \n            // sand\n            if (element == 2) {\n                color = vec4(0.76, 0.7, 0.5, 1);\n            }\n            \n            gl_FragColor = color;\n        }",vert:"\n        precision mediump float;\n        attribute vec2 position;\n        varying vec2 uv;\n        void main() {\n            uv = position;\n            gl_Position = vec4(position, 0, 1);\n        }",uniforms:{data:function(){return j=C.pixels(),O=new Uint8Array(i.q.buffer,j,A*D*4),P({width:A,height:D,data:O})}},attributes:{position:[[-1,4],[-1,-1],[4,-1]]},count:3}),function(){T.poll(),R()}),L=function(){X.tick()};!function n(){window.paused||L(),B(),window.animationId=requestAnimationFrame(n)}()},9:function(n,e,t){"use strict";(function(n){t.d(e,"a",(function(){return k})),t.d(e,"b",(function(){return b})),t.d(e,"d",(function(){return E})),t.d(e,"e",(function(){return M})),t.d(e,"c",(function(){return X})),t.d(e,"f",(function(){return Y})),t.d(e,"g",(function(){return I}));var r=t(10);function i(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function u(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function a(n,e,t){return e&&u(n.prototype,e),t&&u(n,t),n}var c=new Array(32).fill(void 0);function o(n){return c[n]}c.push(void 0,null,!0,!1);var l=c.length;function f(n){var e=o(n);return function(n){n<36||(c[n]=l,l=n)}(n),e}var v=new("undefined"==typeof TextDecoder?(0,n.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});v.decode();var d=null;function s(){return null!==d&&d.buffer===r.q.buffer||(d=new Uint8Array(r.q.buffer)),d}function h(n,e){return v.decode(s().subarray(n,n+e))}var p=0,w=new("undefined"==typeof TextEncoder?(0,n.require)("util").TextEncoder:TextEncoder)("utf-8"),y="function"==typeof w.encodeInto?function(n,e){return w.encodeInto(n,e)}:function(n,e){var t=w.encode(n);return e.set(t),{read:n.length,written:t.length}};var m=null;function g(){return null!==m&&m.buffer===r.q.buffer||(m=new Int32Array(r.q.buffer)),m}var k=Object.freeze({Empty:0,0:"Empty",Wall:1,1:"Wall",Sand:2,2:"Sand"}),b=function(){function n(){i(this,n)}return a(n,[{key:"free",value:function(){var n=this.ptr;this.ptr=0,r.a(n)}},{key:"insert",value:function(n,e,t){r.l(this.ptr,n,e,t)}},{key:"clear",value:function(){r.g(this.ptr)}},{key:"tick",value:function(){r.o(this.ptr)}},{key:"width",value:function(){return r.p(this.ptr)}},{key:"height",value:function(){return r.k(this.ptr)}},{key:"generation",value:function(){return r.h(this.ptr)}},{key:"pixels",value:function(){return r.n(this.ptr)}},{key:"get_pixel",value:function(n,e){var t=r.i(this.ptr,n,e);return x.__wrap(t)}},{key:"get_pixel_state",value:function(n,e){var t=r.j(this.ptr,n,e);return _.__wrap(t)}}],[{key:"__wrap",value:function(e){var t=Object.create(n.prototype);return t.ptr=e,t}},{key:"new",value:function(e,t){var i=r.m(e,t);return n.__wrap(i)}}]),n}(),x=function(){function n(){i(this,n)}return a(n,[{key:"free",value:function(){var n=this.ptr;this.ptr=0,r.b(n)}},{key:"element",value:function(){return r.r(this.ptr)>>>0}}],[{key:"__wrap",value:function(e){var t=Object.create(n.prototype);return t.ptr=e,t}},{key:"new",value:function(e){var t=r.s(e);return n.__wrap(t)}}]),n}(),_=function(){function n(){i(this,n)}return a(n,[{key:"free",value:function(){var n=this.ptr;this.ptr=0,r.c(n)}},{key:"element",value:function(){return r.r(this.ptr)>>>0}},{key:"clock",value:function(){return r.t(this.ptr)}}],[{key:"__wrap",value:function(e){var t=Object.create(n.prototype);return t.ptr=e,t}},{key:"new",value:function(e){var t=r.s(e);return n.__wrap(t)}}]),n}(),E=function(){return function(n){l===c.length&&c.push(c.length+1);var e=l;return l=c[e],c[e]=n,e}(new Error)},M=function(n,e){var t=function(n,e,t){if(void 0===t){var r=w.encode(n),i=e(r.length);return s().subarray(i,i+r.length).set(r),p=r.length,i}for(var u=n.length,a=e(u),c=s(),o=0;o<u;o++){var l=n.charCodeAt(o);if(l>127)break;c[a+o]=l}if(o!==u){0!==o&&(n=n.slice(o)),a=t(a,u,u=o+3*n.length);var f=s().subarray(a+o,a+u);o+=y(n,f).written}return p=o,a}(o(e).stack,r.e,r.f),i=p;g()[n/4+1]=i,g()[n/4+0]=t},X=function(n,e){try{console.error(h(n,e))}finally{r.d(n,e)}},Y=function(n){f(n)},I=function(n,e){throw new Error(h(n,e))}}).call(this,t(13)(n))}}]);
//# sourceMappingURL=1.be3fee6ebaa2b5903ef0.js.map